<!-- base.html -->
{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Get started with a free and open source Tailwind CSS admin dashboard featuring a sidebar layout, advanced charts, and hundreds of components based on Flowbite">
    <meta name="author" content="Themesberg">
    <meta name="generator" content="Hugo 0.107.0">

    <title>{% block title %}{% endblock %}</title>
   
    <link rel="canonical" href="https://themesberg.com/product/tailwind-css/dashboard-windster">
    <link href="https://cdn.jsdelivr.net/npm/flowbite@2.5.2/dist/flowbite.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://rsms.me/inter/inter.css">
    <link href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" rel="stylesheet"/>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/app.css' %}">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="icon" href="{% static 'img\favicon.ico' %}">
    <link rel="mask-icon" href="https://demo.themesberg.com/windster/safari-pinned-tab.svg" color="#5bbad5">
    <link href="https://unpkg.com/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/simple-datatables@latest/dist/style.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet" />
    <link href="{% static 'fontawesomefree/css/all.min.css' %}" rel="stylesheet" type="text/css">    


    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="theme-color" content="#ffffff">
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@">
    <meta name="twitter:creator" content="@">
    <meta name="twitter:title" content="Tailwind CSS Dashboard - Windster">
    <meta name="twitter:description" content="Get started with a free and open source Tailwind CSS admin dashboard featuring a sidebar layout, advanced charts, and hundreds of components based on Flowbite">
    <meta name="twitter:image" content="https://demo.themesberg.com/windster/">

    <!-- Facebook -->
    <meta property="og:url" content="https://demo.themesberg.com/windster/">
    <meta property="og:title" content="Tailwind CSS Dashboard - Windster">
    <meta property="og:description" content="Get started with a free and open source Tailwind CSS admin dashboard featuring a sidebar layout, advanced charts, and hundreds of components based on Flowbite">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://demo.themesberg.com/docs/images/og-image.jpg">
    <meta property="og:image:type" content="image/png">

    <!-- Alpine.js -->
    <script src="//unpkg.com/alpinejs" defer></script>

    
  </head>
  <body class="bg-gray-500">
  

    {% include "includes/nav.html" %}
    <div class="flex overflow-hidden bg-white pt-16">

      {% include "includes/aside.html" %}

      <div class="bg-gray-900 opacity-50 hidden fixed inset-0 z-10" id="sidebarBackdrop"></div>

      <div id="main-content" class="h-full w-full bg-gray-500 relative overflow-y-auto lg:ml-64">
        {% block 'body' %}{% endblock  %}
        
        <div id="spinner-container" class="fixed inset-0 z-50 flex items-center justify-center bg-gray-800 bg-opacity-75 hidden">
          <div class="flex space-x-2">
            <div class="w-4 h-4 bg-blue-500 rounded-full animate-bounce delay-100"></div>
            <div class="w-4 h-4 bg-green-500 rounded-full animate-bounce delay-300"></div>
            <div class="w-4 h-4 bg-yellow-500 rounded-full animate-bounce delay-500"></div>
          </div>
        </div>
        {% include "includes/footer.html" %}

      </div>

    </div>

    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <script src="{% static 'js/app.bundle.js' %}"></script>
    <script src="../path/to/fullcalendar.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/simple-datatables@latest" type="text/javascript"></script>
    <script src="https://cdn.jsdelivr.net/npm/flowbite@2.5.2/dist/flowbite.min.js"></script>
    <script>
      // Controle do spinner
      function showSpinner() {
        document.getElementById('spinner-container').classList.remove('hidden');
      }
    
      function hideSpinner() {
        document.getElementById('spinner-container').classList.add('hidden');
      }
    
      // Exemplo de uso durante o carregamento
      document.addEventListener('DOMContentLoaded', function() {
        hideSpinner(); // Esconde quando tudo carregar
      });
      
      // Mostrar spinner antes do carregamento da página
      window.addEventListener('beforeunload', function() {
        showSpinner();
      });
    </script>
    

    {% block js %}{% endblock js %}

    <!-- Adicione isto antes do fechamento do </body> -->
    {% block floating_elements %}
    <!-- Botão e Modal do Faisca -->
    <button onclick="openFaiscaModal()" 
            class="fixed bottom-4 right-4 w-16 h-16 rounded-full hidden lg:flex items-center p-2 text-white bg-gradient-to-r from-teal-400 to-teal-600 rounded-lg hover:opacity-90 transition animate-bounce">
        <i class="fas fa-dog text-3xl "></i>
    </button>

    <div id="faiscaModal" class="hidden fixed inset-0 bg-black bg-opacity-75 z-[999] flex items-center justify-center p-4">
        <div class="bg-gray-800 rounded-xl w-full max-w-2xl mx-4 shadow-2xl relative">
            <div class="flex justify-between items-center p-4 border-b border-amber-500">
                <h2 class="text-xl font-bold text-amber-400">
                    <i class="fas fa-dog mr-2"></i>Assistente Faisca
                </h2>
                <div class="flex gap-2">
                    <button onclick="resetFaiscaChat()" class="px-3 py-1 bg-amber-700 hover:bg-amber-600 text-sm rounded-lg transition">
                        <i class="fas fa-bone mr-1"></i>Limpar
                    </button>
                    <button onclick="closeFaiscaModal()" class="px-3 py-1 bg-red-600 hover:bg-red-500 text-sm rounded-lg transition">
                        Fechar
                    </button>
                </div>
            </div>
            
            <div class="p-4 h-[500px] flex flex-col">
                <div id="faiscaChat" class="flex-1 overflow-y-auto space-y-4 mb-4"></div>
                
                <div class="flex gap-2">
                    <input type="text" 
                           id="faiscaInput"
                           class="flex-1 bg-gray-700 border border-amber-600 rounded-lg px-4 py-2 text-sm focus:ring-2 focus:ring-amber-500"
                           placeholder="Digite um comando para o Faisca..."
                           onkeypress="handleFaiscaInput(event)">
                    <button onclick="sendFaiscaMessage()" 
                            class="px-4 py-2 bg-amber-600 hover:bg-amber-500 text-sm rounded-lg transition">
                        Enviar
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
    // Controle do Faisca
    let faiscaHistory = [];

    function openFaiscaModal() {
        document.getElementById('faiscaModal').classList.remove('hidden');
        document.body.classList.add('overflow-hidden');
        loadFaiscaHistory();
    }

    function closeFaiscaModal() {
        document.getElementById('faiscaModal').classList.add('hidden');
        document.body.classList.remove('overflow-hidden');
    }

    function resetFaiscaChat() {
        faiscaHistory = [];
        document.getElementById('faiscaChat').innerHTML = '';
    }

    function handleFaiscaInput(e) {
        if (e.key === 'Enter') sendFaiscaMessage();
    }

    function sendFaiscaMessage() {
        const input = document.getElementById('faiscaInput');
        const message = input.value.trim();
        
        if (message) {
            addFaiscaMessage('user', message);
            processFaiscaCommand(message);
            input.value = '';
        }
    }

    function addFaiscaMessage(sender, text) {
        const container = document.getElementById('faiscaChat');
        const messageDiv = document.createElement('div');
        messageDiv.className = `p-3 rounded-lg ${sender === 'user' ? 'bg-gray-700 ml-6' : 'bg-amber-900 shadow mr-6'}`;
        messageDiv.innerHTML = `
            <p class="text-xs font-medium ${sender === 'user' ? 'text-gray-300' : 'text-amber-400'}">
                ${sender === 'user' ? 'Você' : 'Faisca'}
            </p>
            <div class="prose prose-sm prose-invert max-w-none">${text}</div>
        `;
        container.appendChild(messageDiv);
        container.scrollTop = container.scrollHeight;
    }

    function loadFaiscaHistory() {
        // Implementar carregamento do histórico
    }

    // Fechar modal ao clicar fora
    document.getElementById('faiscaModal').addEventListener('click', function(e) {
        if (e.target === this) closeFaiscaModal();
    });

    // Fechar com ESC
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') closeFaiscaModal();
    });
    </script>
    {% endblock floating_elements %}

  </body>
</html>