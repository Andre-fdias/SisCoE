{% extends "base.html" %}
{% load static %}
{% block title %} Consultar Efetivo{% endblock %}
{% block 'head' %}

<link rel="stylesheet" href="{% static 'efetivo\css\ver_militar.css' %}">


{% endblock 'head' %}

{% block 'body' %}
<style>
    @keyframes diagonal-scroll {
    0% { transform: translateY(-100%) translateX(-100%); }
    100% { transform: translateY(100%) translateX(100%); }
}

.diagonal-overlay {
    animation: diagonal-scroll 40s linear infinite;
    background-image: repeating-linear-gradient(
        45deg,
        transparent,
        transparent 10px,
        rgba(0,0,0,0.1) 10px,
        rgba(0,0,0,0.1) 20px
    );
}
</style>

<body>

    <br>
    <div class=" md:items-center md:justify-between rounded-lg mt-4 w-full" id="cad_efetivo">
        
        
     <fieldset class=" p-4 mb-8   rounded-md w-full" id="second-fieldset">   
      
        <fieldset class=" p-2 mb-8 rounded-md w-full" id="first-fieldset">
       
               <div class="flex flex-col h-auto rounded-[10px]">
                <div class=" bg-gradient-to-r from-gray-600 to-gray-900 rounded-xl shadow-2xl  w-full p-8 transition-all duration-300 animate-fade-in">
                    <div class="flex flex-col md:flex-row">
                        <div class="md:w-1/3 text-center mb-8 md:mb-0 relative">
                            {% if cadastro.imagens.exists %}
                                {% with cadastro.promocoes.last as promocao %}
                                <div class="relative group">
                                    <div class="absolute inset-0 overflow-hidden rounded-full w-60 h-60 mx-auto mb-4 ">
                                        <div class="absolute inset-0 grid grid-cols-6 grid-rows-5 -rotate-45 gap-4 opacity-20 pointer-events-none">
                                            {% for _ in "x"|ljust:20 %}
                                            <span class="text-gray-200 text-xs font-mono tracking-wider transform rotate-45">
                                                {{ request.user.profile.cpf|default:"CPF Não Cadastrado" }}
                                            </span>
                                            {% endfor %}
                                        </div>
                                    </div>
                                    
                                    {% if promocao.posto_grad == "Cel PM" or promocao.posto_grad == "Ten Cel PM" or promocao.posto_grad == "Maj PM" or promocao.posto_grad == "CAP PM" or promocao.posto_grad == "1º Ten PM" or promocao.posto_grad == "1º Ten QAPM" or promocao.posto_grad == "2º Ten PM" or promocao.posto_grad == "2º Ten QAPM" or promocao.posto_grad == "Asp OF PM" %}
                                        <img src="{{ cadastro.imagens.last.image.url }}" alt="Profile Picture" 
                                             class="rounded-full w-60 h-60 mx-auto mb-4 border-4 border-blue-500 transition-transform duration-300 hover:scale-105 object-cover">
                                             {% elif promocao.posto_grad == "Subten PM" or promocao.posto_grad == "1º Sgt PM" or promocao.posto_grad == "2º Sgt PM" or promocao.posto_grad == "3º Sgt PM" %}
                                        <img src="{{ cadastro.imagens.last.image.url }}" alt="Profile Picture" 
                                             class="rounded-full w-60 h-60 mx-auto mb-4 border-4 border-red-500 transition-transform duration-300 hover:scale-105 object-cover">
                                    {% elif promocao.posto_grad == "Cb PM" or promocao.posto_grad == "Sd PM" or promocao.posto_grad == "Sd PM 2ºCL" %}
                                        <img src="{{ cadastro.imagens.last.image.url }}" alt="Profile Picture" 
                                             class="rounded-full w-60 h-60 mx-auto mb-4 border-4 border-black transition-transform duration-300 hover:scale-105 object-cover">
                                    {% else %}
                                        <img src="{{ cadastro.imagens.last.image.url }}" alt="Profile Picture" 
                                             class="rounded-full w-60 h-60 mx-auto mb-4 border-4 border-indigo-800 transition-transform duration-300 hover:scale-105 object-cover">
                                    {% endif %}
                                </div>
                                {% endwith %}
                            {% else %}
                                <div class="text-gray-500">Sem imagem</div>
                            {% endif %}
                    
                            <p class="text-gray-300 "> {{ cadastro.promocoes.last.grad|safe }}</p><br>
                            <p class="text-gray-300 font-bold "> {{ cadastro.nome_de_guerra }}</p><br>
                            
                             <!-- Container dos Botões -->
                        <div class="flex flex-col md:flex-row md:flex-wrap gap-3 justify-center w-full mt-4">
                            <!-- Botão Trocar Foto -->
                            <button type="button" 
                                    class="w-full md:w-auto bg-gradient-to-r from-emerald-400 to-cyan-500 hover:from-emerald-500 hover:to-cyan-600 text-white 
                                        font-medium rounded-lg text-sm px-5 py-2.5 transition-all duration-300 hover:shadow-lg
                                        flex items-center justify-center gap-2">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                                </svg>
                                Trocar Foto
                            </button>
                                         <!-- Botão Editar Posto/Grad -->
                            <button type="button" 
                            class="w-full md:w-auto bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white 
                                font-medium rounded-lg text-sm px-5 py-2.5 transition-all duration-300 hover:shadow-lg
                                flex items-center justify-center gap-2">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 14v6m-3-3h6M6 10h2a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v2a2 2 0 002 2zm10 0h2a2 2 0 002-2V6a2 2 0 00-2-2h-2a2 2 0 00-2 2v2a2 2 0 002 2zM6 20h2a2 2 0 002-2v-2a2 2 0 00-2-2H6a2 2 0 00-2 2v2a2 2 0 002 2z"/>
                                </svg>
                                Editar Posto/Grad
                            </button>
                        </div>
    

                        <!-- Modal de Troca de Foto -->
                        <div id="trocaFotoModal" class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm hidden">
                        <div class="bg-white rounded-2xl shadow-xl w-full max-w-md overflow-hidden transform transition-all">
                        <!-- Header -->
                        <div class="flex items-center justify-between p-6 border-b border-gray-100">
                            <h3 class="text-2xl font-bold text-gray-800">Alterar Foto do Perfil</h3>
                            <button type="button" 
                                    class="text-gray-400 hover:text-gray-600 transition-colors"
                                    data-modal-close="#trocaFotoModal">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                                </svg>
                            </button>
                        </div>

                        <!-- Corpo do Modal -->
                        <form method="POST" action="{% url 'efetivo:editar_imagem' cadastro.id %}" enctype="multipart/form-data" class="p-6">
                            {% csrf_token %}
                            <div class="space-y-6">
                                <!-- Área de Upload -->
                                <div class="group relative">
                                    <input type="file" 
                                        name="image" 
                                        id="image" 
                                        accept="image/*"
                                        onchange="previewImage(event)"
                                        class="absolute inset-0 w-full h-full opacity-0 cursor-pointer">
                                    
                                    <div class="border-2 border-dashed border-gray-200 rounded-xl p-8 text-center transition-all
                                            group-hover:border-cyan-500 group-hover:bg-gray-50">
                                        <div class="max-w-xs mx-auto">
                                            <div class="w-24 h-24 mx-auto mb-4 bg-gray-100 rounded-full overflow-hidden
                                                    flex items-center justify-center">
                                                <img id="preview" src="#" alt="Pré-visualização" class="hidden w-full h-full object-cover">
                                                <svg class="w-12 h-12 text-gray-400 group-hover:text-cyan-500 transition-colors" 
                                                    fill="none" 
                                                    stroke="currentColor" 
                                                    viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                                                </svg>
                                            </div>
                                            <p class="text-sm text-gray-500 mb-2">
                                                Arraste ou clique para enviar
                                            </p>
                                            <p class="text-xs text-gray-400">
                                                Formatos suportados: JPG, PNG (máx. 5MB)
                                            </p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Ações -->
                                <div class="flex justify-end gap-3">
                                    <button type="button" 
                                            data-modal-close="#trocaFotoModal"
                                            class="px-5 py-2.5 text-gray-600 hover:text-gray-800 font-medium transition-colors">
                                        Cancelar
                                    </button>
                                    <button type="submit" 
                                            class="px-5 py-2.5 bg-gradient-to-r from-cyan-500 to-emerald-500 text-white 
                                                font-medium rounded-lg hover:shadow-md transition-all">
                                        Salvar Alterações
                                    </button>
                                </div>
                            </div>
                        </form>
                        </div>
                        </div>

                        <script>
                            function previewImage(event) {
                                const reader = new FileReader();
                                const preview = document.getElementById('preview');
                                const icon = preview.parentElement.querySelector('svg');

                                reader.onload = (e) => {
                                    preview.src = e.target.result;
                                    preview.classList.remove('hidden');
                                    icon?.classList.add('hidden');
                                }
                                reader.readAsDataURL(event.target.files[0]);
                            }

                            // Controle do Modal
                            document.querySelectorAll('[data-modal-target]').forEach(button => {
                                button.addEventListener('click', () => {
                                    const modal = document.querySelector(button.dataset.modalTarget);
                                    modal.classList.remove('hidden');
                                });
                            });

                            document.querySelectorAll('[data-modal-close]').forEach(button => {
                                button.addEventListener('click', () => {
                                    const modal = button.closest('.fixed');
                                    modal.classList.add('hidden');
                                });
                            });
                        </script>
            

                    <!-- Modal Principal -->
                    <div id="editModal" class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm hidden">
                    <div class="bg-white rounded-2xl shadow-xl w-full max-w-md overflow-hidden transform transition-all">
                    <!-- Header -->
                    <div class="flex items-center justify-between p-6 border-b border-gray-100">
                        <h3 class="text-2xl font-bold text-gray-800">Editar Posto e Graduação</h3>
                        <button type="button" 
                                class="text-gray-400 hover:text-gray-600 transition-colors"
                                data-modal-close="#editModal">
                            &times;
                        </button>
                    </div>

                    <!-- Corpo do Formulário -->
                    <form id="editForm" method="POST" action="{% url 'efetivo:editar_posto_graduacao' cadastro.id %}" 
                        class="p-6 space-y-6" novalidate>
                        {% csrf_token %}
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <!-- Posto/Grad -->
                            <div class="space-y-2">
                                <label class="block text-sm font-medium text-gray-700">Posto/Graduação</label>
                                <select name="posto_grad" 
                                        class="w-full px-4 py-2.5 border border-gray-200 rounded-lg focus:ring-2 
                                            focus:ring-indigo-500 focus:border-transparent transition-all"
                                        required>
                                    {% for i in posto_grad %}
                                    <option value="{{ i.0 }}" {% if promocao and promocao.posto_grad == i.0 %}selected{% endif %}>
                                        {{ i.1 }}
                                    </option>
                                    {% endfor %}
                                </select>
                            </div>

                            <!-- Quadro -->
                            <div class="space-y-2">
                                <label class="block text-sm font-medium text-gray-700">Quadro</label>
                                <select name="quadro" 
                                        class="w-full px-4 py-2.5 border border-gray-200 rounded-lg focus:ring-2 
                                            focus:ring-indigo-500 focus:border-transparent transition-all"
                                        required>
                                    {% for i in quadro %}
                                    <option value="{{ i.0 }}" {% if promocao and promocao.quadro == i.0 %}selected{% endif %}>
                                        {{ i.1 }}
                                    </option>
                                    {% endfor %}
                                </select>
                            </div>

                            <!-- Grupo -->
                            <div class="space-y-2">
                                <label class="block text-sm font-medium text-gray-700">Grupo</label>
                                <select name="grupo" 
                                        class="w-full px-4 py-2.5 border border-gray-200 rounded-lg focus:ring-2 
                                            focus:ring-indigo-500 focus:border-transparent transition-all"
                                        required>
                                    {% for i in grupo %}
                                    <option value="{{ i.0 }}" {% if promocao and promocao.grupo == i.0 %}selected{% endif %}>
                                        {{ i.1 }}
                                    </option>
                                    {% endfor %}
                                </select>
                            </div>

                            <!-- Data Promoção -->
                            <div class="space-y-2">
                                <label class="block text-sm font-medium text-gray-700">Última Promoção</label>
                                <input type="date" 
                                    name="ultima_promocao" 
                                    value="{% if promocao %}{{ promocao.ultima_promocao|date:'Y-m-d' }}{% endif %}"
                                    class="w-full px-4 py-2.5 border border-gray-200 rounded-lg focus:ring-2 
                                            focus:ring-indigo-500 focus:border-transparent transition-all"
                                    required>
                            </div>
                        </div>

                        <!-- Ações -->
                        <div class="flex justify-end gap-3 pt-4">
                            <button type="button" 
                                    data-modal-close="#editModal"
                                    class="px-5 py-2.5 text-gray-600 hover:text-gray-800 font-medium transition-colors">
                                Cancelar
                            </button>
                            <button type="button" 
                                    onclick="showConfirmation()"
                                    class="px-5 py-2.5 bg-indigo-600 text-white font-medium rounded-lg 
                                        hover:bg-indigo-700 transition-colors">
                                Salvar Alterações
                            </button>
                        </div>
                    </form>
                    </div>
                    </div>

                    <!-- Modal de Confirmação -->
                    <div id="confirmModal" class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm hidden">
                    <div class="bg-white rounded-2xl shadow-xl w-full max-w-md overflow-hidden transform transition-all">
                    <div class="p-6 flex items-center gap-4 border-b border-gray-100">
                        <div class="p-2 bg-yellow-100 rounded-full">
                            <svg class="w-6 h-6 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
                            </svg>
                        </div>
                        <h3 class="text-xl font-semibold text-gray-800">Confirmar Alterações</h3>
                    </div>

                    <div class="p-6 space-y-6">
                        <p class="text-gray-600">Tem certeza que deseja atualizar as informações de posto/graduação?</p>
                        
                        <div class="flex justify-end gap-3">
                            <button type="button" 
                                    onclick="closeConfirmation()"
                                    class="px-5 py-2.5 text-gray-600 hover:text-gray-800 font-medium transition-colors">
                                Cancelar
                            </button>
                            <button type="button" 
                                    onclick="submitForm()"
                                    class="px-5 py-2.5 bg-indigo-600 text-white font-medium rounded-lg 
                                        hover:bg-indigo-700 transition-colors">
                                Confirmar
                            </button>
                        </div>
                    </div>
                    </div>
                    </div>

                    <script>
                        function showConfirmation() {
                            document.getElementById('confirmModal').classList.remove('hidden');
                        }

                        function closeConfirmation() {
                            document.getElementById('confirmModal').classList.add('hidden');
                        }

                        function submitForm() {
                            document.getElementById('editForm').submit();
                            closeConfirmation();
                        }

                        // Controle Modal Principal
                        document.querySelectorAll('[data-modal-target]').forEach(button => {
                            button.addEventListener('click', () => {
                                const modal = document.querySelector(button.dataset.modalTarget);
                                modal.classList.remove('hidden');
                            });
                        });

                        document.querySelectorAll('[data-modal-close]').forEach(button => {
                            button.addEventListener('click', () => {
                                const modal = button.closest('.fixed');
                                modal.classList.add('hidden');
                            });
                        });
                    </script>
                        </div>
                        <div class="md:w-2/3 md:pl-8">
                            <h1 class="text-3xl font-semibold text-gray-300 mb-4">{{ cadastro.nome}}</h1>
                            <h4 class="text-1xl text-gray-500 mb-4" ><b>RE:</b> <span>{{ cadastro.re }}-{{ cadastro.dig }}</span></h4>
                            <br>
                            <h2 class="text-xl font-semibold text-gray-300 mb-4">Principais Cursos</h2>
                            <div class="flex flex-wrap gap-2 mb-6">
                                <span class="bg-indigo-700 text-purple-200 px-3 py-1 rounded-full text-sm">CSalt</span>
                                <span class="bg-indigo-700 text-purple-200 px-3 py-1 rounded-full text-sm">Terrestre</span>
                                <span class="bg-indigo-700 text-purple-200 px-3 py-1 rounded-full text-sm">Mergulho</span>
                                <span class="bg-indigo-700 text-purple-200 px-3 py-1 rounded-full text-sm">OVB</span>
                                <span class="bg-indigo-700 text-purple-200 px-3 py-1 rounded-full text-sm">Incêndio</span>
                            </div>
                            <h2 class="text-xl font-semibold text-gray-300 mb-4">Informações de Contato</h2>
                            <ul class="space-y-2 text-gray-500 ">
                                <li class="flex items-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-indigo-800 " viewBox="0 0 20 20" fill="currentColor">
                                        <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z" />
                                        <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z" />
                                    </svg>
                                    {{ cadastro.email }}    </li>
                                <li class="flex items-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-indigo-800" viewBox="0 0 20 20" fill="currentColor">
                                        <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z" />
                                    </svg>
                                    {{ cadastro.telefone }}
                                </li>
                                <li class="flex items-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-indigo-800 dark:text-blue-900" viewBox="0 0 20 20" fill="currentColor">
                                        <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" />
                                    </svg>
                                    {{ cadastro.detalhes_situacao.last.sgb }}-     {{ cadastro.detalhes_situacao.last.posto_secao }}

                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

        </fieldset> 
        <fieldset class="    rounded-md">
     
            {% if messages %}
            {% for message in messages %}
                <section class="alert {{ message.tags }} p-4 mb-4 rounded-md">
                    {{ message }}
                </section>
            {% endfor %}
            {% endif %}
       
    </fieldset>


    <!-- Dados da Situação Funcional e Documentos -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 p-2 mb-4 rounded-md w-full max-w-full">
        <!-- Situação Funcional -->
        <fieldset class="bg-gray-100 rounded-2xl shadow-lg p-6 border border-gray-200 flex flex-col h-full">
            <div class="flex-grow"> <!-- Conteúdo principal -->
                <h2 class="text-xl font-semibold text-indigo-900 mb-2 flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m5 10v-3a3 3 0 00-3-3H5a3 3 0 00-3 3v3c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2z"/>
                    </svg>
                    Situação Funcional
                </h2>
                <a href="{% url 'efetivo:historico_movimentacoes' cadastro.id %}" class="text-xs text-gray-600 hover:text-indigo-400 transition duration-300 block mb-2">
                    Histórico de Movimentações e Promoções →
                </a>
                <hr class="my-4 border-gray-200">
                
                <div class="space-y-3">
                    <div class="flex items-center justify-between gap-4">
                        <span class="text-gray-600 font-medium">Situação:</span>
                        <span class="text-gray-800 font-semibold">{{ cadastro.detalhes_situacao.last.status|default:"-" }}</span>
                    </div>
                    
                    <div class="flex items-center justify-between gap-4">
                        <span class="text-gray-600 font-medium">Status:</span>
                        <span class="text-gray-800 font-semibold">{{ cadastro.detalhes_situacao.last.status_cat|default:"- " }}</span>
                    </div>
                    
                    <div class="flex items-center justify-between gap-4">
                        <span class="text-gray-600 font-medium">SGB:</span>
                        <span class="text-gray-800 font-semibold">{{ cadastro.detalhes_situacao.last.sgb|default:"-" }}</span>
                    </div>
                    
                    <div class="flex items-center justify-between gap-4">
                        <span class="text-gray-600 font-medium">Posto/Seção:</span>
                        <span class="text-gray-800 font-semibold">{{ cadastro.detalhes_situacao.last.posto_secao|default:"-" }}</span>
                    </div>
                    
                    <div class="flex items-center justify-between gap-4">
                        <span class="text-gray-600 font-medium">Adido ao:</span>
                        <span class="text-gray-800 font-semibold">{{ cadastro.detalhes_situacao.last.esta_adido|default:"-" }}</span>
                    </div>
                    
                    <div class="flex items-center justify-between gap-4">
                        <span class="text-gray-600 font-medium">Função:</span>
                        <span class="text-gray-800 font-semibold">{{ cadastro.detalhes_situacao.last.funcao|default:"-" }}</span>
                    </div>
                    
                    <div class="flex items-center justify-between gap-4">
                        <span class="text-gray-600 font-medium">Operacional/Adm:</span>
                        <span class="text-gray-800 font-semibold">{{ cadastro.detalhes_situacao.last.prontidao_badge|safe|default:"-" }}</span>
                    </div>
                </div>
            </div>

            <!-- Rodapé fixo -->
            <div class="mt-auto pt-4">
            
                <button type="button" class="mt-4 w-2/4 text-gray-900 bg-gradient-to-r from-lime-200 via-lime-400 to-lime-500 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-lime-300 dark:focus:ring-lime-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center transition-all" data-modal-target="#editSituacaoModal">
                    Editar Sit. Funcional
                </button>
                    <!-- Primeiro Modal (Edição da Situação Atual) -->
                    <div id="editSituacaoModal" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 hidden">
                    <div class="bg-gray-600 rounded-lg shadow-lg w-full max-w-2xl">
                        <div class="flex justify-between bg-gray-800 p-4 ">
                            <h5 class="text-xl text-gray-300">Editar Situação Funcional</h5>
                            <button type="button" class="text-gray-500 hover:text-gray-700 w-5 h-5" data-modal-close="#editSituacaoModal">×</button>
                        </div>
                        <div class="p-4">
                            <!-- Formulário de Edição -->
                            <form id="editSituacaoForm" method="POST" action="{% url 'efetivo:editar_situacao_atual' cadastro.id %}">
                                {% csrf_token %}
                                <!-- Campos do formulário -->
                                <br>
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label for="situacao_atual" class="block mb-2 text-sm font-medium text-gray-400 ">Situação Atual</label>
                                        <select name="situacao_atual" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" id="situacao_atual" required>
                                            {% for value, label in situacao %}
                                            <option value="{{ value }}" {% if detalhes and detalhes.situacao == value %}selected{% endif %}>{{ label }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                    <div>
                                        <label for="cat_efetivo" class="block mb-2 text-sm font-medium text-gray-400">Detalhamento</label>
                                        <select name="cat_efetivo" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" id="cat_efetivo" required>
                                            {% for value, label in cat_efetivo %}
                                            <option value="{{ value }}" {% if detalhes and detalhes.cat_efetivo == value %}selected{% endif %}>{{ label }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                    <div>
                                        <label for="prontidao" class="block mb-2 text-sm font-medium text-gray-400">Qual Prontidão</label>
                                        <select name="prontidao" id="prontidao" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md" required>
                                            {% for i in prontidao %}
                                            <option value="{{ i.0 }}">{{ i.1 }}</option>
                                            {% endfor %}
                                        </select>
                                        <div class="text-red-500 text-sm mt-1 hidden" id="op_adm_error">Por favor, selecione sua prontidão.</div>
                                    </div>
                                    <div>
                                        <label for="saida_da_unidade" class="block mb-2 text-sm font-medium text-gray-400 ">Data de Saída da Unidade</label>
                                        <input type="date" name="saida_da_unidade" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" id="saida_da_unidade" value="{% if detalhes %}{{ detalhes.saida_da_unidade|date:'Y-m-d' }}{% endif %}" required>
                                    </div>
                                </div>
                                <br>
                                <div class="flex justify-end space-x-2"> 
                                    <button type="button" class="text-white bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-blue-300 dark:focus:ring-blue-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 mb-2" data-modal-close="#editSituacaoModal">Cancelar</button>
                                    <button type="submit" class="text-white bg-gradient-to-r from-green-400 via-green-500 to-green-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-green-300 dark:focus:ring-green-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 mb-2">Salvar</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Modal de Escolha -->
                <div id="choiceModal" class="fixed inset-0 flex items-center justify-center w-120 bg-black bg-opacity-50 hidden">
                    <div class="bg-gray-300 rounded-lg shadow-lg w-full max-w-md">
                        <div class="flex justify-between  bg-gray-400 p-4">
                            <h5 class="text-xl text-gray-00">Você deseja cadastrar nova Situação Funcional?</h5>
                            <button type="button" class="text-gray-500 hover:text-gray-700 w-10 h-10" data-modal-close="#choiceModal">×</button>
                        </div>
                        <div class="p-4 text-center">
                            <br>
                            <br>

                            <button type="button" class="text-white bg-gradient-to-r from-green-400 via-green-500 to-green-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-green-300 dark:focus:ring-green-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 mb-2" data-modal-target="#newSituacaoModal">SIM</button>
                            <button type="button" class="text-white bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-blue-300 dark:focus:ring-blue-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 mb-2" data-modal-close="#choiceModal" onclick="window.location.href='{% url 'efetivo:ver_militar' cadastro.id %}'">NÃO</button>
                        </div>
                    </div>
                </div>
                <!-- Segundo Modal (Cadastro da Nova Situação) -->
                <div id="newSituacaoModal" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 hidden">
                    <div class="bg-gray-600 rounded-lg shadow-lg w-full max-w-2xl">
                        <div class="flex justify-between bg-gray-800 items-center p-4 text-gray-300">
                            <h5 class="text-xl font-medium">Cadastrar Nova Situação</h5>
                            <button type="button" class="text-gray-500 hover:text-gray-700 w-5 h-5" data-modal-close="#newSituacaoModal">×</button>
                        </div>
                        <div class="p-4">
                            <!-- Formulário de Cadastro -->
                            <form id="newSituacaoForm" method="POST" action="{% url 'efetivo:cadastrar_nova_situacao' cadastro.id %}" class="row g-3 needs-validation" novalidate>
                                {% csrf_token %}
                                <!-- Campos do formulário -->
                                <h2 class="text-lg text-gray-200 mb-4">Nova Situação</h2>
                                <br>
                                <div class="grid grid-cols-3 gap-4">
                                    <div>
                                        <label for="situacao" class="block mb-2 text-sm font-medium text-gray-400">Situação</label>
                                        <select name="situacao" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" id="situacao" required>
                                            {% for i in situacao %}
                                            <option value="{{ i.0 }}">{{ i.1 }}</option>
                                            {% endfor %}
                                        </select>
                                        <div class="text-red-500 text-sm mt-1 hidden">
                                            Por favor, selecione a nova situação.
                                        </div>
                                    </div>
                                    <div>
                                        <label for="cat_efetivo" class="block mb-2 text-sm font-medium text-gray-400">Detalhamento</label>
                                        <select name="cat_efetivo" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" id="cat_efetivo" required>
                                            {% for i in cat_efetivo %}
                                            <option value="{{ i.0 }}">{{ i.1 }}</option>
                                            {% endfor %}
                                        </select>
                                        <div class="text-red-500 text-sm mt-1 hidden">
                                            Por favor, selecione a nova situação.
                                        </div>
                                    </div>
                                    <div>
                                        <label for="sgb" class="block mb-2 text-sm font-medium text-gray-400">SGB</label>
                                        <select name="sgb" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" id="sgb" required>
                                            {% for i in sgb %}
                                            <option value="{{ i.0 }}">{{ i.1 }}</option>
                                            {% endfor %}
                                        </select>
                                        <div class="text-red-500 text-sm mt-1 hidden">
                                            Por favor, selecione o SGB.
                                        </div>
                                    </div>
                                    <div>
                                        <label for="posto_secao" class="block mb-2 text-sm font-medium text-gray-400">Posto ou Seção</label>
                                        <select name="posto_secao" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" id="posto_secao" required>
                                            {% for i in posto_secao %}
                                            <option value="{{ i.0 }}">{{ i.1 }}</option>
                                            {% endfor %}
                                        </select>
                                        <div class="text-red-500 text-sm mt-1 hidden">
                                            Por favor, selecione o posto ou seção.
                                        </div>
                                    </div>
                                    <div>
                                        <label for="esta_adido" class="block mb-2 text-sm font-medium text-gray-400">Está Adido?</label>
                                        <select name="esta_adido" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" id="esta_adido" required>
                                            {% for i in esta_adido %}
                                            <option value="{{ i.0 }}">{{ i.1 }}</option>
                                            {% endfor %}
                                        </select>
                                        <div class="text-red-500 text-sm mt-1 hidden">
                                            Por favor, selecione se está adido a outro posto ou seção.
                                        </div>
                                    </div>
                                    <div>
                                        <label for="funcao" class="block mb-2 text-sm font-medium text-gray-400">Função que exerce</label>
                                        <select name="funcao" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" id="funcao" required>
                                            {% for i in funcao %}
                                            <option value="{{ i.0 }}">{{ i.1 }}</option>
                                            {% endfor %}
                                        </select>
                                        <div class="text-red-500 text-sm mt-1 hidden">
                                            Por favor, selecione a função que exerce.
                                        </div>
                                    </div>
                                    <div>
                                        <label for="op_adm" class="block mb-2 text-sm font-medium text-gray-400">Operacional ou Adm</label>
                                        <select name="op_adm" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" id="op_adm" required>
                                            {% for i in op_adm %}
                                            <option value="{{ i.0 }}">{{ i.1 }}</option>
                                            {% endfor %}
                                        </select>
                                        <div class="text-red-500 text-sm mt-1 hidden">
                                            Por favor, selecione se é operacional ou administrativo.
                                        </div>
                                    </div>
                                
                                    <div>
                                        <label for="apresentacao_na_unidade" class="block mb-2 text-sm font-medium text-gray-400">Data da Apresentação</label>
                                        <input type="date" name="apresentacao_na_unidade" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" id="apresentacao_na_unidade" required>
                                        <div class="text-red-500 text-sm mt-1 hidden">
                                            Por favor, insira a data da apresentação na unidade.
                                        </div>
                                    </div>
                                </div>
                                <br>
                                <div class="flex justify-end space-x-2">
                                    <button type="button" class="text-white bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-blue-300 dark:focus:ring-blue-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 mb-2" data-modal-close="#newSituacaoModal">Cancelar</button>
                                    <button type="submit" class="text-white bg-gradient-to-r from-green-400 via-green-500 to-green-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-green-300 dark:focus:ring-green-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 mb-2">Salvar</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

            </div>
        </fieldset>

        <!-- Documentos e Contatos -->
        <fieldset class="bg-gray-100 rounded-2xl shadow-lg p-6 border border-gray-200 flex flex-col h-full">
            <div class="flex-grow"> <!-- Conteúdo principal -->
                <h2 class="text-xl font-semibold text-indigo-900 mb-4 flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                    </svg>
                    Documentos e Contatos
                </h2>
                <hr class="my-4 border-gray-200">
                
                <div class="space-y-3">
                    <div class="flex items-center justify-between gap-4">
                        <span class="text-gray-600 font-medium">CPF:</span>
                        <span class="text-gray-800 font-semibold">{{ cadastro.cpf|default:"-" }}</span>
                    </div>
                    
                    <div class="flex items-center justify-between gap-4">
                        <span class="text-gray-600 font-medium">RG:</span>
                        <span class="text-gray-800 font-semibold">{{ cadastro.rg|default:"-" }}</span>
                    </div>
                    
                    <div class="flex items-center justify-between gap-4">
                        <span class="text-gray-600 font-medium">E-mail:</span>
                        <span class="text-gray-800 font-semibold">{{ cadastro.email|default:"-" }}</span>
                    </div>
                    
                    <div class="flex items-center justify-between gap-4">
                        <span class="text-gray-600 font-medium">Telefone:</span>
                        <span class="text-gray-800 font-semibold">{{ cadastro.telefone|default:"-" }}</span>
                    </div>
                    
                    <div class="flex items-center justify-between gap-4">
                        <span class="text-gray-600 font-medium">Matrícula:</span>
                        <span class="text-gray-800 font-semibold">{{ cadastro.matricula|date:"d/m/Y"|default:"-" }}</span>
                    </div>
                    
                    <div class="flex items-center justify-between gap-4">
                        <span class="text-gray-600 font-medium">Admissão:</span>
                        <span class="text-gray-800 font-semibold">{{ cadastro.admissao|date:"d/m/Y"|default:"-" }}</span>
                    </div>
                </div>
            </div>

            <!-- Rodapé fixo -->
            <div class="mt-auto pt-4">
                <button type="button" class="mt-4 w-2/4 text-gray-900 bg-gradient-to-r from-lime-200 via-lime-400 to-lime-500 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-lime-300 dark:focus:ring-lime-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center transition-all" data-modal-target="#editarDadosPessoaisModal">
                    Editar Dados Pessoais e Contatos
                </button>
            </div>
               <!-- Modal de Edição de Dados Pessoais e Contatos -->
               <div id="editarDadosPessoaisModal" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 hidden">
                <div class="bg-gray-600 rounded-lg shadow-lg w-full max-w-2xl">
                    <div class="flex justify-between items-center p-4 bg-gray-800">
                        <h5 class="text-xl text-gray-200">Editar Dados Pessoais e Contatos</h5>
                        <button type="button" class="text-gray-300 hover:text-gray-500" data-modal-close="#editarDadosPessoaisModal">&times;</button>
                    </div>
                    <div class="p-4">
                        <br><br>
                        <form method="POST" action="{% url 'efetivo:editar_dados_pessoais_contatos' cadastro.id %}" enctype="multipart/form-data" id="editForm1">
                            {% csrf_token %}
                        
                                <div class="grid grid-cols-3 gap-4">
                                    
                                        <div>
                                            <label for="re" class="block text-sm font-medium text-gray-400 dark:text-white">RE</label>
                                            <input type="text" name="re" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" id="re" value="{{ cadastro.re }}" required>
                                        </div>
                                        <div>
                                            <label for="dig" class="block text-sm font-medium text-gray-400 dark:text-white">Dig</label>
                                            <input type="text" name="dig" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" id="dig" value="{{ cadastro.dig }}" required>
                                        </div>
                                        <div>
                                            <label for="nome" class="block text-sm font-medium text-gray-400 dark:text-white">Nome</label>
                                            <input type="text" name="nome" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" id="nome" value="{{ cadastro.nome }}" required>
                                        </div>
                                        <div>
                                            <label for="nome_de_guerra" class="block text-sm font-medium text-gray-400 dark:text-white">Nome de Guerra</label>
                                            <input type="text" name="nome_de_guerra" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" id="nome_de_guerra" value="{{ cadastro.nome_de_guerra }}" required>
                                        </div>
                                        <div>
                                            <label for="genero" class="block text-sm font-medium text-gray-400 dark:text-white">Gênero</label>
                                            <select name="genero" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" id="genero" required>
                                                {% for i in genero %}
                                                <option value="{{ i.0 }}" {% if cadastro.genero == i.0 %}selected{% endif %}>{{ i.1 }}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                        <div>
                                            <label for="nasc" class="block text-sm font-medium text-gray-400 dark:text-white">Data de Nascimento</label>
                                            <input type="date" name="nasc" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" id="nasc" value="{{ cadastro.nasc|date:'Y-m-d' }}" required>
                                        </div>
                                        <div>
                                            <label for="matricula" class="block text-sm font-medium text-gray-400 dark:text-white">Data de Matrícula</label>
                                            <input type="date" name="matricula" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" id="matricula" value="{{ cadastro.matricula|date:'Y-m-d' }}" required>
                                        </div>
                                        <div>
                                            <label for="admissao" class="block text-sm font-medium text-gray-400 dark:text-white">Data de Admissão</label>
                                            <input type="date" name="admissao" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" id="admissao" value="{{ cadastro.admissao|date:'Y-m-d' }}" required>
                                        </div>
                                        <div>
                                            <label for="previsao_de_inatividade" class="block text-sm font-medium text-gray-400 dark:text-white">Prev. de Inatividade</label>
                                            <input type="date" name="previsao_de_inatividade" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" id="previsao_de_inatividade" value="{{ cadastro.previsao_de_inatividade|date:'Y-m-d' }}" required>
                                        </div>
                                        <div>
                                            <label for="cpf" class="block text-sm font-medium text-gray-400 dark:text-white">CPF</label>
                                            <input type="text" name="cpf" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" id="cpf" value="{{ cadastro.cpf }}" required>
                                        </div>
                                        <div>
                                            <label for="rg" class="block text-sm font-medium text-gray-400 dark:text-white">RG</label>
                                            <input type="text" name="rg" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" id="rg" value="{{ cadastro.rg }}" required>
                                        </div>
                                        <div>
                                            <label for="tempo_para_averbar_inss" class="block text-sm font-medium text-gray-400 dark:text-white">INSS</label>
                                            <input type="text" name="tempo_para_averbar_inss" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" id="tempo_para_averbar_inss" value="{{ cadastro.tempo_para_averbar_inss }}">
                                        </div>
                                        <div>
                                            <label for="tempo_para_averbar_militar" class="block text-sm font-medium text-gray-400 dark:text-white">Militar</label>
                                            <input type="text" name="tempo_para_averbar_militar" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" id="tempo_para_averbar_militar" value="{{ cadastro.tempo_para_averbar_militar }}">
                                        </div>
                                        <div>
                                            <label for="email" class="block text-sm font-medium text-gray-400 dark:text-white">Email</label>
                                            <input type="email" name="email" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" id="email" value="{{ cadastro.email}}" required>
                                        </div>
                                        <div>
                                            <label for="telefone" class="block text-sm font-medium text-gray-400 dark:text-white">Telefone</label>
                                            <input type="tel" name="telefone" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" id="telefone" value="{{ cadastro.telefone }}" required>
                                        </div>
                                        <div>
                                            <label for="alteracao" class="block text-sm font-medium text-gray-400 dark:text-white">Motivo da Alteração</label>
                                            <select name="alteracao" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" id="alteracao" required>
                                                {% for i in alteracao %}
                                                <option value="{{ i.0 }}" {% if cadastro.alteracao == i.0 %}selected{% endif %}>{{ i.1 }}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                    </div>

                                    
                            <div class="flex justify-end space-x-2 mt-4">

                                    <button type="button" class="text-white bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-blue-300 dark:focus:ring-blue-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 mb-2" data-modal-close="#editarDadosPessoaisModal">Cancelar</button>
                                    <button type="submit" class="text-white bg-gradient-to-r from-green-400 via-green-500 to-green-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-green-300 dark:focus:ring-green-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 mb-2" data-modal-target="#confirmModal-geral">Salvar</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Modal de Confirmação -->
            <div id="confirmModal-geral" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 hidden">
                <div class="bg-gray-600 rounded-lg shadow-lg w-full max-w-md">
                    <div class="flex justify-between items-center p-4 bg-gray-800">
                        <h5 class="text-xl text-gray-200">Confirmar Alterações</h5>
                        <button type="button" class="text-gray-500 hover:text-gray-700" data-modal-close="#confirmModal-geral">&times;</button>
                    </div>
                    <br>
                    <br>
                    <div class="p-4 text-gray-400">
                        Tem certeza de que deseja salvar as alterações?
                    </div>
                    <div class="flex justify-end space-x-2 p-4">

                        <button type="button" class="text-white bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-blue-300 dark:focus:ring-blue-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 mb-2" data-modal-close="#confirmModal-geral">Cancelar</button>
                        <button type="button" class="text-white bg-gradient-to-r from-green-400 via-green-500 to-green-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-green-300 dark:focus:ring-green-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 mb-2"  id="confirmSave1">Salvar</button>
                    </div>
                </div>
            </div>

            <script>
                document.addEventListener('DOMContentLoaded', () => {
                    const openModalButtons = document.querySelectorAll('[data-modal-target]');
                    const closeModalButtons = document.querySelectorAll('[data-modal-close]');

                    openModalButtons.forEach(button => {
                        button.addEventListener('click', () => {
                            const modal = document.querySelector(button.dataset.modalTarget);
                            openModal(modal);
                        });
                    });

                    closeModalButtons.forEach(button => {
                        button.addEventListener('click', () => {
                            const modal = button.closest('.fixed');
                            closeModal(modal);
                        });
                    });

                    function openModal(modal) {
                        if (modal == null) return;
                        modal.classList.remove('hidden');
                    }

                    function closeModal(modal) {
                        if (modal == null) return;
                        modal.classList.add('hidden');
                    }

                    const confirmSave1 = document.getElementById('confirmSave1');
                    confirmSave1.addEventListener('click', () => {
                        document.getElementById('editForm1').submit();
                        const modal = document.getElementById('confirmModal-geral');
                        closeModal(modal);
                    });
                });
            </script>
        </fieldset>
    </div>


      
 
    <script>
        <script>
// Adicione este script no final do body ou garanta que ele rode após o DOM estar carregado
document.addEventListener('DOMContentLoaded', () => {
    // Função genérica para controle de modais
    const modalController = (openButtons, closeButtons) => {
        openButtons.forEach(button => {
            button.addEventListener('click', () => {
                const target = button.dataset.modalTarget;
                const modal = document.querySelector(target);
                if (modal) modal.classList.remove('hidden');
            });
        });

        closeButtons.forEach(button => {
            button.addEventListener('click', () => {
                const modal = button.closest('.fixed');
                if (modal) modal.classList.add('hidden');
            });
        });
    };

    // Configurar para todos os modais
    const allOpenButtons = document.querySelectorAll('[data-modal-target]');
    const allCloseButtons = document.querySelectorAll('[data-modal-close]');
    modalController(allOpenButtons, allCloseButtons);

    // Funções específicas para o modal de confirmação
    function showConfirmation() {
        document.getElementById('confirmModal').classList.remove('hidden');
    }

    function closeConfirmation() {
        document.getElementById('confirmModal').classList.add('hidden');
    }

    function submitForm() {
        document.getElementById('editForm').submit();
        closeConfirmation();
    }

    // Atribuir eventos aos botões de confirmação
    document.getElementById('confirmSave')?.addEventListener('click', submitForm);
});

// Função de preview de imagem (mantida igual)
function previewImage(event) {
    const reader = new FileReader();
    const preview = document.getElementById('preview');
    const icon = preview.parentElement.querySelector('svg');

    reader.onload = (e) => {
        preview.src = e.target.result;
        preview.classList.remove('hidden');
        icon?.classList.add('hidden');
    }
    reader.readAsDataURL(event.target.files[0]);
}
</script>
    // Controle do Modal
    function openDeleteModal() {
        document.getElementById('exampleModal').classList.remove('hidden');
        document.getElementById('passwordInput').focus();
    }
    
    function closeDeleteModal() {
        document.getElementById('exampleModal').classList.add('hidden');
        document.getElementById('passwordError').classList.add('hidden');
    }
    
    // Tratamento de mensagens de erro
    {% if messages %}
        {% for message in messages %}
            {% if message.extra_tags == 'delete_error' %}
                document.getElementById('passwordError').innerText = '{{ message }}';
                document.getElementById('passwordError').classList.remove('hidden');
                openDeleteModal();
            {% endif %}
        {% endfor %}
    {% endif %}
    </script>
     </fieldset>

        <script>
            function validatePassword() {
                const password = document.getElementById('password').value;
                const correctPassword = 'suaSenhaAqui'; // Substitua por sua lógica de verificação de senha
        
                if (password === correctPassword) {
                    window.location.href = "{% url 'efetivo:excluir_militar' cadastro.id %}";
                } else {
                    alert('Senha incorreta. Tente novamente.');
                }
            }
        
            document.querySelectorAll('[data-modal-target]').forEach(button => {
                button.addEventListener('click', () => {
                    const modal = document.querySelector(button.getAttribute('data-modal-target'));
                    modal.classList.remove('hidden');
                });
            });
        
            document.querySelectorAll('[data-modal-close]').forEach(button => {
                button.addEventListener('click', () => {
                    const modal = document.querySelector(button.getAttribute('data-modal-close'));
                    modal.classList.add('hidden');
                });
            });
        </script>
        
        <script>
            document.addEventListener('DOMContentLoaded', () => {
                const openModalButtons = document.querySelectorAll('[data-modal-target]');
                const closeModalButtons = document.querySelectorAll('[data-modal-close]');
    
                openModalButtons.forEach(button => {
                    button.addEventListener('click', () => {
                        const modal = document.querySelector(button.dataset.modalTarget);
                        openModal(modal);
                    });
                });
    
                closeModalButtons.forEach(button => {
                    button.addEventListener('click', () => {
                        const modal = button.closest('.fixed');
                        closeModal(modal);
                    });
                });
    
                function openModal(modal) {
                    if (modal == null) return;
                    modal.classList.remove('hidden');
                }
    
                function closeModal(modal) {
                    if (modal == null) return;
                    modal.classList.add('hidden');
                }
            });
        </script>
        <script>
        document.addEventListener('DOMContentLoaded', () => {
            const openModalButtons = document.querySelectorAll('[data-modal-target]');
            const closeModalButtons = document.querySelectorAll('[data-modal-close]');
    
            openModalButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const modal = document.querySelector(button.dataset.modalTarget);
                    openModal(modal);
                });
            });
    
            closeModalButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const modal = button.closest('.fixed');
                    closeModal(modal);
                });
            });
    
            function openModal(modal) {
                if (modal == null) return;
                modal.classList.remove('hidden');
            }
    
            function closeModal(modal) {
                if (modal == null) return;
                modal.classList.add('hidden');
            }
        });
        </script>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const openModalButtons = document.querySelectorAll('[data-modal-target]');
            const closeModalButtons = document.querySelectorAll('[data-modal-close]');
            
            openModalButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const modal = document.querySelector(button.dataset.modalTarget);
                    openModal(modal);
                });
            });
            
            closeModalButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const modal = button.closest('.fixed');
                    closeModal(modal);
                });
            });
            
            function openModal(modal) {
                if (modal == null) return;
                modal.classList.remove('hidden');
            }
            
            function closeModal(modal) {
                if (modal == null) return;
                modal.classList.add('hidden');
            }
            
            const editSituacaoForm = document.getElementById('editSituacaoForm');
            editSituacaoForm.addEventListener('submit', (event) => {
                event.preventDefault();
                const formData = new FormData(editSituacaoForm);
                fetch(editSituacaoForm.action, {
                    method: 'POST',
                    body: formData,
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        const choiceModal = document.getElementById('choiceModal');
                        openModal(choiceModal);
                    } else {
                        alert('Erro ao salvar a situação atual.');
                    }
                })
                .catch(error => {
                    console.error('Erro:', error);
                    alert('Erro ao salvar a situação atual.');
                });
            });
            
            const newSituacaoForm = document.getElementById('newSituacaoForm');
            newSituacaoForm.addEventListener('submit', (event) => {
                event.preventDefault();
                newSituacaoForm.submit();
            });
        });
   </script>
        
<script src="{% static 'efetivo/js/ver_militar.js' %}"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/5.3.0/js/bootstrap.min.js"></script>
</body>

{% endblock  %}