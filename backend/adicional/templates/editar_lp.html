{% extends "base.html" %}
{% load static %}
{% block title %}Editar Adicional e LP{% endblock %}

{% block 'body' %}

<body class="bg-gray-50">
    <div class="md:items-center md:justify-between rounded-lg mt-4 w-full" id="cad_efetivo">
    
        <!-- Cabeçalho -->
        <fieldset class="p-4 rounded-md w-full">
            <fieldset class="bg-gradient-to-r from-gray-600 to-gray-900 rounded-md shadow-lg mb-2 border-0">
                <div class="p-4">
                    <div class="flex flex-wrap items-center justify-between gap-4">
                        <div class="flex-1 min-w-[200px]">
                            <h1 class="text-3xl font-bold text-white tracking-tight drop-shadow-md">Editar Períodos</h1>
                            <p class="text-gray-300 text-sm mt-1">Atualize os dados de Adicional e Licença-Prêmio</p>
                        </div>
                        
                        <div class="flex flex-col sm:flex-row gap-2 w-full sm:w-auto">
                            <a href="{% url 'adicional:ver_lp' cadastro.id %}" 
                               class="text-white bg-gradient-to-r from-gray-500 to-gray-600 hover:bg-gradient-to-br 
                                      focus:ring-4 focus:outline-none focus:ring-gray-300 shadow-lg shadow-gray-500/50 
                                      font-medium rounded-lg text-sm px-5 py-2.5 text-center transition-all duration-200">
                                Voltar
                            </a>
                        </div>
                    </div>
                </div>
            </fieldset>
        </fieldset>

        <!-- Mensagens -->
        {% if messages %}
        <div class="mb-4">
            {% for message in messages %}
            <div class="p-4 mb-4 text-sm rounded-lg {% if message.tags %}{{ message.tags }}{% endif %}" role="alert">
                {{ message }}
            </div>
            {% endfor %}
        </div>
        {% endif %}

        <!-- Formulário -->
        <fieldset class="p-4 mb-2 rounded-md w-full max-w-full">
            <form method="POST" action="{% url 'adicional:editar_lp' cadastro.id %}" 
                  class="bg-white rounded-2xl shadow-2xl w-full p-8 transition-all duration-300 animate-fade-in">
                {% csrf_token %}
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <!-- Seção Adicional -->
                    <div class="space-y-6">
                        <h2 class="text-xl font-semibold text-indigo-900 border-b pb-2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            Adicional de Tempo
                        </h2>
                        
                        <div class="space-y-4">
                            <div>
                                <label for="numero_adicional" class="block text-sm font-medium text-gray-700 mb-2">Bloco Atual</label>
                                <select name="numero_adicional" id="numero_adicional" 
                                        class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-indigo-500 
                                               focus:border-indigo-500 transition-all duration-200">
                                    {% for value, display in cadastro.n_choices %}
                                    <option value="{{ value }}" {% if value == cadastro.numero_adicional %}selected{% endif %}>{{ display }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            
                            <div>
                                <label for="data_ultimo_adicional" class="block text-sm font-medium text-gray-700 mb-2">Última Concessão</label>
                                <input type="date" name="data_ultimo_adicional" id="data_ultimo_adicional" 
                                       value="{{ cadastro.data_ultimo_adicional|date:'Y-m-d' }}"
                                       class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-indigo-500 
                                              focus:border-indigo-500 transition-all duration-200">
                            </div>
                            
                            <div>
                                <label for="dias_desconto_adicional" class="block text-sm font-medium text-gray-700 mb-2">Dias de Desconto</label>
                                <input type="number" name="dias_desconto_adicional" id="dias_desconto_adicional" 
                                       value="{{ cadastro.dias_desconto_adicional }}"
                                       class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-indigo-500 
                                              focus:border-indigo-500 transition-all duration-200">
                            </div>
                            
                            <div>
                                <label for="situacao_adicional" class="block text-sm font-medium text-gray-700 mb-2">Situação</label>
                                <select name="situacao_adicional" id="situacao_adicional" 
                                        class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-indigo-500 
                                               focus:border-indigo-500 transition-all duration-200">
                                    {% for value, display in cadastro.situacao_choices %}
                                    <option value="{{ value }}" {% if value == cadastro.situacao_adicional %}selected{% endif %}>{{ display }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Seção Licença-Prêmio -->
                    <div class="space-y-6">
                        <h2 class="text-xl font-semibold text-indigo-900 border-b pb-2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
                            </svg>
                            Licença-Prêmio
                        </h2>
                        
                        <div class="space-y-4">
                            <div>
                                <label for="numero_lp" class="block text-sm font-medium text-gray-700 mb-2">Bloco Atual</label>
                                <select name="numero_lp" id="numero_lp" 
                                        class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-indigo-500 
                                               focus:border-indigo-500 transition-all duration-200">
                                    {% for value, display in cadastro.n_choices %}
                                    <option value="{{ value }}" {% if value == cadastro.numero_lp %}selected{% endif %}>{{ display }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            
                            <div>
                                <label for="data_ultimo_lp" class="block text-sm font-medium text-gray-700 mb-2">Última Concessão</label>
                                <input type="date" name="data_ultimo_lp" id="data_ultimo_lp" 
                                       value="{{ cadastro.data_ultimo_lp|date:'Y-m-d' }}"
                                       class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-indigo-500 
                                              focus:border-indigo-500 transition-all duration-200">
                            </div>
                            
                            <div>
                                <label for="dias_desconto_lp" class="block text-sm font-medium text-gray-700 mb-2">Dias de Desconto</label>
                                <input type="number" name="dias_desconto_lp" id="dias_desconto_lp" 
                                       value="{{ cadastro.dias_desconto_lp }}"
                                       class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-indigo-500 
                                              focus:border-indigo-500 transition-all duration-200">
                            </div>
                            
                            <div>
                                <label for="situacao_lp" class="block text-sm font-medium text-gray-700 mb-2">Situação</label>
                                <select name="situacao_lp" id="situacao_lp" 
                                        class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-indigo-500 
                                               focus:border-indigo-500 transition-all duration-200">
                                    {% for value, display in cadastro.situacao_choices %}
                                    <option value="{{ value }}" {% if value == cadastro.situacao_lp %}selected{% endif %}>{{ display }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Botões de Ação -->
                <div class="mt-8 flex flex-col sm:flex-row gap-4 justify-end border-t pt-6">
                    <button type="submit" 
                            class="px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white 
                                   font-semibold rounded-xl shadow-sm hover:shadow-md
                                   transition-all duration-200 hover:scale-[1.02]
                                   flex items-center justify-center gap-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                        </svg>
                        Salvar Alterações
                    </button>
                    
                    <a href="{% url 'adicional:ver_lp' cadastro.id %}" 
                       class="px-6 py-3 bg-gradient-to-r from-gray-500 to-gray-600 text-white 
                              font-semibold rounded-xl shadow-sm hover:shadow-md
                              transition-all duration-200 hover:scale-[1.02]
                              flex items-center justify-center gap-2">
                        Cancelar
                    </a>
                </div>
            </form>
        </fieldset>
    </div>
</body>
{% endblock %}