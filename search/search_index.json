{"config":{"lang":["pt"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Bem-vindo \u00e0 Documenta\u00e7\u00e3o do SisCoE","text":"<p>O SisCoE (Sistema de Controle de Efetivo) \u00e9 uma plataforma de gest\u00e3o robusta e integrada, constru\u00edda com Django para oferecer uma solu\u00e7\u00e3o completa para o gerenciamento de opera\u00e7\u00f5es administrativas e de pessoal em corpora\u00e7\u00f5es ou institui\u00e7\u00f5es.</p> <p>Esta documenta\u00e7\u00e3o serve como um guia central para desenvolvedores, administradores de sistema e contribuidores. Aqui voc\u00ea encontrar\u00e1 informa\u00e7\u00f5es detalhadas sobre a arquitetura do projeto, a estrutura de cada aplica\u00e7\u00e3o, guias de configura\u00e7\u00e3o e melhores pr\u00e1ticas.</p>"},{"location":"#objetivo-do-projeto","title":"\ud83c\udfaf Objetivo do Projeto","text":"<p>O objetivo principal do SisCoE \u00e9 centralizar, automatizar e otimizar a gest\u00e3o do efetivo e das opera\u00e7\u00f5es correlatas. A plataforma visa substituir processos manuais e planilhas descentralizadas por um sistema \u00fanico e confi\u00e1vel, garantindo:</p> <ul> <li>Efici\u00eancia Operacional: Reduzir o tempo gasto em tarefas administrativas.</li> <li>Consist\u00eancia dos Dados: Manter um registro \u00fanico e verdadeiro sobre o efetivo, escalas, cursos e documentos.</li> <li>Apoio \u00e0 Decis\u00e3o: Fornecer dados e relat\u00f3rios consolidados para gestores.</li> <li>Transpar\u00eancia: Facilitar o acesso \u00e0 informa\u00e7\u00e3o para todos os n\u00edveis da organiza\u00e7\u00e3o.</li> </ul>"},{"location":"#navegando-pela-documentacao","title":"\ud83d\ude80 Navegando pela Documenta\u00e7\u00e3o","text":"<p>Como se orientar</p> <p>Toda a documenta\u00e7\u00e3o est\u00e1 organizada em se\u00e7\u00f5es l\u00f3gicas, acess\u00edveis pelo menu lateral. Use a barra de pesquisa a qualquer momento para encontrar termos espec\u00edficos rapidamente.</p>   -   __Desenvolvimento__      ***      Entenda a arquitetura, a estrutura de pastas, o versionamento e as boas pr\u00e1ticas de codifica\u00e7\u00e3o do projeto.      [:octicons-arrow-right-24: Explorar Desenvolvimento](./desenvolvimento/arquitetura.md)  -   __Aplica\u00e7\u00f5es (Apps)__      ***      Um mergulho profundo em cada m\u00f3dulo do Django, detalhando seus models, views e responsabilidades.      [:octicons-arrow-right-24: Ver Aplica\u00e7\u00f5es](./apps/core.md)  -   __Configura\u00e7\u00e3o__      ***      Guias sobre as `settings` do projeto, vari\u00e1veis de ambiente e como rodar o SisCoE em diferentes ambientes.      [:octicons-arrow-right-24: Acessar Configura\u00e7\u00e3o](./configuracao/settings_base.md)"},{"location":"apps/accounts/","title":"App: Accounts","text":"<p>O app <code>accounts</code> \u00e9 respons\u00e1vel por todo o ciclo de vida do usu\u00e1rio no SisCoE, desde o seu registro e autentica\u00e7\u00e3o at\u00e9 a gest\u00e3o de permiss\u00f5es e auditoria de suas a\u00e7\u00f5es. Ele substitui o sistema de usu\u00e1rio padr\u00e3o do Django por um modelo mais robusto e adaptado \u00e0s necessidades do projeto.</p>"},{"location":"apps/accounts/#modelo-de-dados","title":"Modelo de Dados","text":"<p>O <code>accounts</code> \u00e9 constru\u00eddo em torno de um modelo de usu\u00e1rio customizado e modelos de suporte para auditoria.</p>"},{"location":"apps/accounts/#o-modelo-user","title":"O Modelo <code>User</code>","text":"<p>O cora\u00e7\u00e3o do app \u00e9 o modelo <code>User</code>, que herda de <code>AbstractBaseUser</code> do Django.</p> <p>Modelo <code>accounts.models.User</code></p> <pre><code>class User(AbstractBaseUser, PermissionsMixin):\n    email = models.EmailField(unique=True)\n    first_name = models.CharField(max_length=150)\n    last_name = models.CharField(max_length=150)\n    is_active = models.BooleanField(default=True)\n    is_admin = models.BooleanField(default=False)\n\n    # Campos customizados\n    permissoes = models.CharField(max_length=20, choices=PERMISSOES_CHOICES, default=\"basico\")\n    cadastro = models.OneToOneField('efetivo.Cadastro', on_delete=models.SET_NULL, null=True, blank=True)\n    must_change_password = models.BooleanField(default=False)\n    login_history = models.JSONField(default=list, blank=True, null=True)\n\n    USERNAME_FIELD = 'email'\n    REQUIRED_FIELDS = ['first_name', 'last_name']\n</code></pre> <p>Campos Not\u00e1veis: -   <code>email</code>: Usado como o identificador \u00fanico para login, em vez de um nome de usu\u00e1rio. -   <code>permissoes</code>: Um campo <code>CharField</code> que define o n\u00edvel de acesso do usu\u00e1rio no sistema (ex: <code>basico</code>, <code>sgb</code>, <code>gestor</code>, <code>admin</code>). Este campo \u00e9 a base para o controle de permiss\u00f5es hier\u00e1rquico. -   <code>cadastro</code>: Uma chave estrangeira <code>OneToOne</code> para o modelo <code>Cadastro</code> do app <code>efetivo</code>. Este v\u00ednculo \u00e9 crucial, pois conecta a identidade do usu\u00e1rio no sistema \u00e0 sua ficha militar. -   <code>must_change_password</code>: Um booleano que, se <code>True</code>, for\u00e7a o usu\u00e1rio a trocar sua senha no primeiro login. -   <code>login_history</code>: Um campo <code>JSONField</code> que armazena um log detalhado de cada sess\u00e3o de login do usu\u00e1rio, incluindo IP, nome do computador e hor\u00e1rios de login/logout.</p>"},{"location":"apps/accounts/#modelos-de-auditoria","title":"Modelos de Auditoria","text":"<ul> <li><code>UserActionLog</code>: Registra a\u00e7\u00f5es importantes realizadas por um usu\u00e1rio, como \"Fez login\" ou \"Alterou senha\".</li> <li><code>TermosAceite</code>: Armazena a prova de que um usu\u00e1rio aceitou os termos e condi\u00e7\u00f5es durante o registro, incluindo a data, IP e uma c\u00f3pia da assinatura digital.</li> </ul>"},{"location":"apps/accounts/#fluxo-de-criacao-de-conta","title":"Fluxo de Cria\u00e7\u00e3o de Conta","text":"<p>O processo de cria\u00e7\u00e3o de conta \u00e9 projetado para garantir que apenas militares ativos e v\u00e1lidos possam se registrar.</p> <pre><code>sequenceDiagram\n    participant U as Usu\u00e1rio\n    participant S as SisCoE\n    participant DB as BD (Efetivo)\n    participant M as E-mail (Brevo)\n\n    U-&gt;&gt;S: Acessa \"Criar Conta\"\n    S-&gt;&gt;U: Solicita CPF (view `verificar_cpf`)\n    U-&gt;&gt;S: Envia CPF\n    S-&gt;&gt;DB: Consulta `Cadastro` pelo CPF\n\n    alt CPF V\u00e1lido e Ativo\n        DB--&gt;&gt;S: Retorna dados do militar\n        S-&gt;&gt;U: Mostra tela de registro com dados pr\u00e9-preenchidos (view `signup`)\n        U-&gt;&gt;S: Aceita os termos e assina digitalmente\n        S-&gt;&gt;S: Cria o `User` no banco\n        S-&gt;&gt;S: Gera senha aleat\u00f3ria\n        S-&gt;&gt;M: Envia e-mail com a senha gerada\n        M--&gt;&gt;U: Entrega o e-mail\n        S-&gt;&gt;U: Exibe mensagem de sucesso\n    else CPF Inv\u00e1lido ou Inativo\n        DB--&gt;&gt;S: N\u00e3o retorna dados\n        S-&gt;&gt;U: Exibe mensagem de erro\n    end\n</code></pre>"},{"location":"apps/accounts/#autenticacao-e-seguranca","title":"Autentica\u00e7\u00e3o e Seguran\u00e7a","text":""},{"location":"apps/accounts/#login","title":"Login","text":"<p>A view de login (<code>login_view</code>) n\u00e3o apenas valida as credenciais do usu\u00e1rio, mas tamb\u00e9m executa uma verifica\u00e7\u00e3o cr\u00edtica em tempo real: 1.  Autentica o usu\u00e1rio com e-mail e senha. 2.  Verifica o <code>cadastro</code> associado no app <code>efetivo</code>. 3.  Confere se a situa\u00e7\u00e3o do militar \u00e9 \"Efetivo\" e \"ATIVO\". 4.  Se a verifica\u00e7\u00e3o falhar, o login \u00e9 impedido e o usu\u00e1rio \u00e9 desativado (<code>is_active = False</code>) como medida de seguran\u00e7a.</p>"},{"location":"apps/accounts/#recuperacao-de-senha","title":"Recupera\u00e7\u00e3o de Senha","text":"<p>O fluxo de \"Esqueci Minha Senha\" utiliza as views padr\u00e3o do Django, mas as sobrescreve (<code>MyPasswordResetView</code>, etc.) para delegar o envio de e-mails ao servi\u00e7o Brevo, garantindo alta taxa de entrega e desacoplamento.</p>"},{"location":"apps/accounts/#troca-de-senha-forcada","title":"Troca de Senha For\u00e7ada","text":"<p>Se o campo <code>must_change_password</code> de um usu\u00e1rio for <code>True</code>, ele \u00e9 automaticamente redirecionado para a view <code>force_password_change_view</code> ap\u00f3s o login, garantindo que senhas tempor\u00e1rias ou iniciais sejam imediatamente substitu\u00eddas.</p>"},{"location":"apps/accounts/#gestao-e-auditoria","title":"Gest\u00e3o e Auditoria","text":"<p>O app <code>accounts</code> fornece um conjunto completo de ferramentas para administradores e gestores:</p> <ul> <li>Lista de Usu\u00e1rios (<code>/users/</code>): Permite visualizar todos os usu\u00e1rios cadastrados.</li> <li>Detalhes do Usu\u00e1rio (<code>/users/&lt;pk&gt;/</code>): Exibe informa\u00e7\u00f5es detalhadas de um usu\u00e1rio, incluindo seu hist\u00f3rico de logins recentes.</li> <li>Altera\u00e7\u00e3o de Permiss\u00f5es (<code>/users/&lt;pk&gt;/permission_update/</code>): Uma interface para gestores e administradores ajustarem o n\u00edvel de permiss\u00e3o (<code>permissoes</code>), o status de ativo e outras flags de seguran\u00e7a de um usu\u00e1rio.</li> <li>Hist\u00f3ricos Globais: Views como <code>global_access_history</code> e <code>global_user_action_history</code> permitem uma auditoria completa de todos os acessos e a\u00e7\u00f5es no sistema.</li> </ul>"},{"location":"apps/adicional/","title":"App: Adicional","text":"<p>O app <code>adicional</code> \u00e9 um m\u00f3dulo especializado para o Controle de Adicional por Tempo de Servi\u00e7o (ATS), tamb\u00e9m conhecido como quinqu\u00eanio, e para a gest\u00e3o do benef\u00edcio da sexta-parte.</p> <p>Ele gerencia todo o ciclo de vida do ATS de um militar, desde o c\u00e1lculo da data de direito, passando pelo lan\u00e7amento em sistemas de pagamento, at\u00e9 a publica\u00e7\u00e3o em boletim e o encerramento do ciclo atual para dar in\u00edcio ao pr\u00f3ximo.</p>"},{"location":"apps/adicional/#modelo-de-dados","title":"Modelo de Dados","text":"<p>A arquitetura de dados do app \u00e9 focada em manter o estado atual do benef\u00edcio e, ao mesmo tempo, uma trilha de auditoria completa de todas as altera\u00e7\u00f5es.</p> <ul> <li><code>Cadastro_adicional</code>: Este \u00e9 o modelo principal. Cada registro representa o bloco de tempo de servi\u00e7o atual (um quinqu\u00eanio) de um militar. Ele cont\u00e9m as datas, o status do workflow e os dados de publica\u00e7\u00e3o.</li> <li><code>HistoricoCadastro</code>: Este modelo \u00e9 um \"espelho\" do <code>Cadastro_adicional</code>. Toda vez que um registro principal \u00e9 alterado, uma c\u00f3pia de seu estado \u00e9 salva aqui, garantindo um hist\u00f3rico imut\u00e1vel.</li> </ul> <p>Modelo <code>adicional.models.Cadastro_adicional</code></p> <p>               Bases: <code>Model</code></p>"},{"location":"apps/adicional/#backend.adicional.models.Cadastro_adicional.clean","title":"<code>clean()</code>","text":"<p>Valida\u00e7\u00e3o personalizada para o modelo</p>"},{"location":"apps/adicional/#backend.adicional.models.Cadastro_adicional.pode_concluir","title":"<code>pode_concluir(user)</code>","text":"<p>Verifica se o usu\u00e1rio pode concluir este adicional</p>"},{"location":"apps/adicional/#fluxo-de-vida-de-um-adicional-workflow","title":"Fluxo de Vida de um Adicional (Workflow)","text":"<p>O status de um adicional progride atrav\u00e9s de um workflow bem definido, representado pelo campo <code>status_adicional</code>.</p> <pre><code>stateDiagram-v2\n    direction LR\n    [*] --&gt; Aguardando_Requisitos\n    Aguardando_Requisitos --&gt; Faz_Jus: Data de direito atingida\n    Faz_Jus --&gt; Lancado_em_SIPA: Gestor registra no SIPA\n    Lancado_em_SIPA --&gt; Aguardando_Publicacao: Gestor aguarda publica\u00e7\u00e3o\n    Aguardando_Publicacao --&gt; Publicado: Gestor registra dados do Boletim\n    Publicado --&gt; Encerrado: Gestor conclui o ciclo\n    Encerrado --&gt; [*]\n</code></pre> <ol> <li>Aguardando Requisitos: O estado inicial. O sistema aguarda a data em que o militar ter\u00e1 direito ao pr\u00f3ximo adicional.</li> <li>Faz Jus: A data de direito foi atingida. O adicional est\u00e1 pronto para ser processado pela administra\u00e7\u00e3o. O <code>signal</code> <code>check_adicional_status</code> ajuda a automatizar essa transi\u00e7\u00e3o.</li> <li>Lan\u00e7ado em SIPA: Um gestor confirma que o benef\u00edcio foi lan\u00e7ado no SIPA (Sistema Integrado de Pagamentos).</li> <li>Aguardando Publica\u00e7\u00e3o: Aguardando a publica\u00e7\u00e3o da concess\u00e3o em Boletim Geral (BOL G PM).</li> <li>Publicado: O gestor insere os dados da publica\u00e7\u00e3o (n\u00famero do boletim e data).</li> <li>Encerrado: O ciclo do adicional atual \u00e9 finalizado, e o sistema est\u00e1 pronto para que o pr\u00f3ximo bloco de 5 anos seja cadastrado.</li> </ol>"},{"location":"apps/adicional/#endpoints-urls-principais","title":"Endpoints (URLs) Principais","text":"URL View Nome da URL Descri\u00e7\u00e3o <code>/cadastrar/</code> <code>cadastrar_adicional</code> <code>cadastrar_adicional</code> Inicia o cadastro de um adicional para um militar. <code>/listar/</code> <code>listar_adicional</code> <code>listar_adicional</code> Lista todos os adicionais em andamento, com seus status. <code>/ver-adicional/&lt;int:id&gt;/</code> <code>ver_adicional</code> <code>ver_adicional</code> Exibe a p\u00e1gina de detalhes completa de um ciclo de adicional. <code>/historico-adicional/&lt;int:id&gt;/</code> <code>historico_adicional</code> <code>historico_adicional</code> Mostra o hist\u00f3rico de todas as altera\u00e7\u00f5es de um adicional. <code>/concluir-adicional/&lt;int:id&gt;/</code> <code>concluir_adicional</code> <code>concluir_adicional</code> Executa a a\u00e7\u00e3o de concluir (encerrar) o ciclo de um adicional. <code>/editar-concessao/&lt;int:pk&gt;/</code> <code>editar_concessao</code> <code>editar_concessao</code> Permite ao gestor inserir os dados de publica\u00e7\u00e3o do boletim. <code>/confirmar-sipa/&lt;int:pk&gt;/</code> <code>confirmar_sipa</code> <code>confirmar_sipa</code> Confirma que o adicional foi lan\u00e7ado no sistema de pagamento."},{"location":"apps/adicional/#sinais-e-automacoes-signalspy","title":"Sinais e Automa\u00e7\u00f5es (<code>signals.py</code>)","text":"<ul> <li><code>check_adicional_status(sender, instance, ...)</code>:<ul> <li>Gatilho: <code>post_save</code> no modelo <code>Cadastro_adicional</code>.</li> <li>A\u00e7\u00e3o: Ap\u00f3s salvar uma altera\u00e7\u00e3o, este sinal verifica se a data do <code>proximo_adicional</code> j\u00e1 foi atingida. Se sim, e se o status ainda for <code>Aguardando Requisitos</code>, ele o atualiza automaticamente para <code>Faz Jus</code>, sinalizando para a administra\u00e7\u00e3o que uma a\u00e7\u00e3o \u00e9 necess\u00e1ria.</li> </ul> </li> </ul>"},{"location":"apps/agenda/","title":"App: Agenda","text":"<p>O app <code>agenda</code> \u00e9 um m\u00f3dulo de produtividade pessoal integrado ao SisCoE. Ele fornece a cada usu\u00e1rio uma agenda privada para criar e gerenciar seus pr\u00f3prios lembretes e tarefas, ajudando na organiza\u00e7\u00e3o de compromissos e atividades.</p>"},{"location":"apps/agenda/#modelo-de-dados","title":"Modelo de Dados","text":"<p>A <code>agenda</code> utiliza dois modelos simples para representar os diferentes tipos de compromissos de um usu\u00e1rio. Cada registro \u00e9 estritamente vinculado ao usu\u00e1rio que o criou.</p> <ul> <li><code>Lembrete</code>: Usado para eventos pontuais, que ocorrem em uma data e hora espec\u00edficas.</li> <li><code>Tarefa</code>: Usado para atividades que t\u00eam uma dura\u00e7\u00e3o, com data de in\u00edcio e data de t\u00e9rmino.</li> </ul> <p>Modelo <code>agenda.models.Lembrete</code></p> <p>               Bases: <code>Model</code></p> <p>Modelo para representar um lembrete. Campos: - titulo: T\u00edtulo do lembrete. - descricao: Descri\u00e7\u00e3o detalhada do lembrete. - data: Data e hora do lembrete. - tipo: Tipo do evento (padr\u00e3o: 'Lembrete'). - cor: Cor associada ao lembrete (padr\u00e3o: azul). - user: Usu\u00e1rio associado ao lembrete.</p> <p>Modelo <code>agenda.models.Tarefa</code></p> <p>               Bases: <code>Model</code></p> <p>Modelo para representar uma tarefa. Campos: - titulo: T\u00edtulo da tarefa. - descricao: Descri\u00e7\u00e3o detalhada da tarefa. - data_inicio: Data e hora de in\u00edcio da tarefa. - data_fim: Data e hora de t\u00e9rmino da tarefa. - tipo: Tipo do evento (padr\u00e3o: 'Tarefa'). - cor: Cor associada \u00e0 tarefa (padr\u00e3o: azul). - user: Usu\u00e1rio associado \u00e0 tarefa.</p>"},{"location":"apps/agenda/#backend.agenda.models.Tarefa.clean","title":"<code>clean()</code>","text":"<p>Valida se a data de t\u00e9rmino n\u00e3o \u00e9 anterior \u00e0 data de in\u00edcio.</p>"},{"location":"apps/agenda/#funcionalidades-principais","title":"Funcionalidades Principais","text":""},{"location":"apps/agenda/#visualizacao-em-calendario","title":"Visualiza\u00e7\u00e3o em Calend\u00e1rio","text":"<p>A view principal do app, <code>calendario</code>, renderiza uma interface de calend\u00e1rio (provavelmente usando uma biblioteca JavaScript como FullCalendar) onde o usu\u00e1rio pode visualizar todos os seus lembretes e tarefas de forma gr\u00e1fica e interativa.</p>"},{"location":"apps/agenda/#gerenciamento-de-eventos-via-ajax","title":"Gerenciamento de Eventos via AJAX","text":"<p>Para proporcionar uma experi\u00eancia de usu\u00e1rio mais fluida e moderna, as opera\u00e7\u00f5es mais comuns s\u00e3o realizadas de forma ass\u00edncrona, sem a necessidade de recarregar a p\u00e1gina: -   Cria\u00e7\u00e3o: As views <code>lembrete_novo</code> e <code>tarefa_nova</code> recebem os dados do formul\u00e1rio via <code>POST</code> e retornam um <code>JsonResponse</code> indicando sucesso ou falha. -   Exclus\u00e3o: As views <code>excluir_lembrete</code> e <code>excluir_tarefa</code> tamb\u00e9m s\u00e3o acessadas via <code>POST</code> e retornam um <code>JsonResponse</code>, permitindo que o evento seja removido da interface do calend\u00e1rio dinamicamente.</p>"},{"location":"apps/agenda/#notificacoes-de-proximos-eventos","title":"Notifica\u00e7\u00f5es de Pr\u00f3ximos Eventos","text":"<p>A view <code>eventos_proximos</code> fornece um endpoint que retorna um JSON com todos os lembretes e tarefas do usu\u00e1rio que ocorrer\u00e3o nas pr\u00f3ximas 48 horas. Essa funcionalidade \u00e9 projetada para ser consumida por um script no frontend que pode exibir alertas ou notifica\u00e7\u00f5es de \"pr\u00f3ximos eventos\" para o usu\u00e1rio.</p>"},{"location":"apps/agenda/#endpoints-urls-principais","title":"Endpoints (URLs) Principais","text":"URL View M\u00e9todo Descri\u00e7\u00e3o <code>/calendario/</code> <code>calendario</code> GET Renderiza a p\u00e1gina principal da agenda com o calend\u00e1rio. <code>/lembrete/novo/</code> <code>lembrete_novo</code> POST (AJAX) Cria um novo lembrete. <code>/tarefa/nova/</code> <code>tarefa_nova</code> POST (AJAX) Cria uma nova tarefa. <code>/lembrete/editar/&lt;int:pk&gt;/</code> <code>lembrete_editar</code> GET/POST P\u00e1gina para editar um lembrete existente. <code>/tarefa/editar/&lt;int:pk&gt;/</code> <code>tarefa_editar</code> GET/POST P\u00e1gina para editar uma tarefa existente. <code>/lembrete/excluir/&lt;int:pk&gt;/</code> <code>excluir_lembrete</code> POST (AJAX) Exclui um lembrete. <code>/tarefa/excluir/&lt;int:pk&gt;/</code> <code>excluir_tarefa</code> POST (AJAX) Exclui uma tarefa. <code>/eventos-proximos/</code> <code>eventos_proximos</code> GET Retorna um JSON com os eventos das pr\u00f3ximas 48 horas."},{"location":"apps/bm/","title":"App: BM (Bombeiro Municipal)","text":"<p>O app <code>bm</code> \u00e9 o m\u00f3dulo do SisCoE dedicado ao cadastro e gerenciamento de pessoal dos Bombeiros Municipais. Ele funciona como um sistema de registros paralelo ao app <code>efetivo</code>, mas focado especificamente nesta categoria de pessoal.</p>"},{"location":"apps/bm/#modelo-de-dados","title":"Modelo de Dados","text":"<p>O app possui um modelo de dados simples e direto para armazenar as informa\u00e7\u00f5es dos bombeiros municipais.</p> <ul> <li><code>Cadastro_bm</code>: O modelo principal. Armazena os dados pessoais e funcionais de cada bombeiro municipal, como nome, CPF, CNH, datas de admiss\u00e3o e nascimento, e sua lota\u00e7\u00e3o (SGB e posto/se\u00e7\u00e3o).</li> <li><code>Imagem_bm</code>: Um modelo para armazenar a foto de perfil do bombeiro municipal.</li> </ul> <p>Modelo <code>bm.models.Cadastro_bm</code></p> <p>               Bases: <code>Model</code></p>"},{"location":"apps/bm/#funcionalidades-principais","title":"Funcionalidades Principais","text":""},{"location":"apps/bm/#gerenciamento-de-cadastros-crud","title":"Gerenciamento de Cadastros (CRUD)","text":"<p>O app fornece uma interface completa para o ciclo de vida do cadastro de um bombeiro municipal: -   Criar: A view <code>cadastrar_bm</code> permite adicionar novos bombeiros ao sistema. -   Listar: A view <code>listar_bm</code> exibe uma lista de todos os bombeiros municipais cadastrados. -   Visualizar: A view <code>ver_bm</code> mostra a ficha detalhada de um bombeiro espec\u00edfico. -   Editar: A view <code>editar_bm</code> permite a atualiza\u00e7\u00e3o dos dados cadastrais. -   Excluir: A view <code>excluir_bm</code> remove o registro de um bombeiro, exigindo confirma\u00e7\u00e3o com senha para seguran\u00e7a.</p>"},{"location":"apps/bm/#importacao-e-exportacao-de-dados","title":"Importa\u00e7\u00e3o e Exporta\u00e7\u00e3o de Dados","text":"<p>Uma funcionalidade poderosa do m\u00f3dulo <code>bm</code> \u00e9 a capacidade de gerenciar dados em massa: -   Importa\u00e7\u00e3o (<code>importar_bm</code>): Permite que administradores fa\u00e7am o upload de um arquivo CSV ou Excel para cadastrar m\u00faltiplos bombeiros de uma s\u00f3 vez. O sistema valida as colunas e os dados antes de import\u00e1-los. -   Exporta\u00e7\u00e3o (<code>exportar_bm</code>): Atrav\u00e9s do <code>export_utils.py</code>, o sistema pode gerar e exportar a rela\u00e7\u00e3o de efetivo dos bombeiros municipais em m\u00faltiplos formatos:     -   PDF: Um relat\u00f3rio formatado e profissional.     -   Excel (XLSX): Uma planilha para an\u00e1lises e uso externo.     -   CSV: Um formato de texto simples para integra\u00e7\u00e3o com outros sistemas.</p>"},{"location":"apps/bm/#endpoints-urls-principais","title":"Endpoints (URLs) Principais","text":"URL View Nome da URL Descri\u00e7\u00e3o <code>/</code> <code>listar_bm</code> <code>listar_bm</code> P\u00e1gina principal do app, lista todos os bombeiros municipais. <code>/cadastrar/</code> <code>cadastrar_bm</code> <code>cadastrar_bm</code> Exibe o formul\u00e1rio para criar um novo bombeiro municipal. <code>/ver/&lt;int:pk&gt;/</code> <code>ver_bm</code> <code>ver_bm</code> Mostra a ficha detalhada de um bombeiro. <code>/editar/&lt;int:pk&gt;/</code> <code>editar_bm</code> <code>editar_bm</code> Permite a edi\u00e7\u00e3o dos dados de um bombeiro. <code>/excluir/&lt;int:pk&gt;/</code> <code>excluir_bm</code> <code>excluir_bm</code> Processa a exclus\u00e3o de um bombeiro. <code>/importar/</code> <code>importar_bm</code> <code>importar_bm</code> P\u00e1gina para upload de arquivos para importa\u00e7\u00e3o em massa. <code>/exportar/</code> <code>exportar_bm</code> <code>exportar_bm</code> Endpoint para baixar os dados em diferentes formatos."},{"location":"apps/calculadora/","title":"App: Calculadora","text":"<p>O app <code>calculadora</code> \u00e9 uma ferramenta utilit\u00e1ria projetada para uma finalidade muito espec\u00edfica: calcular o tempo de servi\u00e7o e as proje\u00e7\u00f5es de aposentadoria de um militar, com base em regras de transi\u00e7\u00e3o e ped\u00e1gios, provavelmente decorrentes de uma reforma legislativa.</p> <p>Ele encapsula uma l\u00f3gica de neg\u00f3cio complexa, permitindo que os usu\u00e1rios insiram seus dados e recebam uma estimativa de quando atingir\u00e3o os requisitos para a inatividade.</p>"},{"location":"apps/calculadora/#como-usar-a-calculadora","title":"Como Usar a Calculadora","text":"<p>A calculadora possui uma interface simples com um \u00fanico formul\u00e1rio. Para obter as proje\u00e7\u00f5es, o usu\u00e1rio deve preencher os seguintes campos:</p> <ul> <li>Data de Admiss\u00e3o do Militar: A data em que o militar ingressou na corpora\u00e7\u00e3o.</li> <li>Averba\u00e7\u00e3o FFAA/PM/CBM (dias): O tempo de servi\u00e7o prestado em outras For\u00e7as Armadas, Pol\u00edcias Militares ou Corpos de Bombeiros Militares que foi oficialmente averbado (em dias).</li> <li>Averba\u00e7\u00e3o INSS/Outros \u00d3rg\u00e3os (dias): O tempo de contribui\u00e7\u00e3o ao INSS ou outros \u00f3rg\u00e3os p\u00fablicos que foi averbado. O sistema limita este valor a um m\u00e1ximo de 1825 dias (5 anos).</li> <li>Afastamentos Descont\u00e1veis (dias): O total de dias de afastamentos que n\u00e3o contam para o tempo de servi\u00e7o (ex: licen\u00e7as espec\u00edficas).</li> </ul> <p>Ap\u00f3s preencher os dados e submeter o formul\u00e1rio, a p\u00e1gina exibir\u00e1 os resultados dos c\u00e1lculos.</p>"},{"location":"apps/calculadora/#entendendo-os-resultados","title":"Entendendo os Resultados","text":"<p>A view <code>calcular_tempo_servico</code> retorna um conjunto de datas e valores projetados. Aqui est\u00e1 o que cada um significa:</p> <ul> <li>Tempo at\u00e9 01/01/2021: O total de dias de servi\u00e7o que o militar possu\u00eda na data de corte da reforma (01 de janeiro de 2021).</li> <li>Ped\u00e1gio de 17%: Com base no tempo que faltava para o militar completar 30 anos de servi\u00e7o na data de corte, o sistema calcula um \"ped\u00e1gio\" de 17% que deve ser cumprido. Este valor \u00e9 exibido em dias.</li> <li>Data com Ped\u00e1gio de 17%: A data projetada em que o militar completar\u00e1 os 30 anos de servi\u00e7o mais o ped\u00e1gio de 17%.</li> <li>Data de 25 Anos de Servi\u00e7o: A data em que o militar completa 25 anos de servi\u00e7o.</li> <li>Acr\u00e9scimo de 4 meses: Um c\u00e1lculo que adiciona 120 dias (4 meses) para cada ano de servi\u00e7o a partir de 2022, at\u00e9 um limite.</li> <li>Data com Tempo Militar: A data projetada para aposentadoria considerando a regra de 25 anos de servi\u00e7o mais o acr\u00e9scimo de 4 meses por ano.</li> </ul>"},{"location":"apps/calculadora/#implementacao","title":"Implementa\u00e7\u00e3o","text":"<p>O app utiliza um modelo <code>CalculoMilitar</code> n\u00e3o para armazenamento persistente, mas como uma estrutura para validar e transportar os dados de entrada do formul\u00e1rio para a view. Toda a l\u00f3gica de neg\u00f3cio reside na view <code>calcular_tempo_servico</code>, que processa os inputs e renderiza os resultados no template <code>calculadora/calculo.html</code>.</p>"},{"location":"apps/core/","title":"App: Core","text":"<p>O app <code>core</code> \u00e9 o cora\u00e7\u00e3o da interface do usu\u00e1rio e da orquestra\u00e7\u00e3o de dados no SisCoE. Diferente de outros apps, ele n\u00e3o gerencia um dom\u00ednio de neg\u00f3cio espec\u00edfico com seus pr\u00f3prios models. Em vez disso, sua principal fun\u00e7\u00e3o \u00e9 agregar dados de m\u00faltiplos apps e apresent\u00e1-los de forma coesa nas p\u00e1ginas principais do sistema.</p> <p>Arquitetura do App Core</p> <p>Este app funciona como um agregador e apresentador. Ele busca informa\u00e7\u00f5es dos apps <code>efetivo</code>, <code>agenda</code>, <code>documentos</code>, entre outros, e as consolida em dashboards e p\u00e1ginas principais, al\u00e9m de gerenciar funcionalidades transversais como permiss\u00f5es e busca global.</p>"},{"location":"apps/core/#responsabilidades-principais","title":"Responsabilidades Principais","text":"<ul> <li>P\u00e1ginas Principais: Fornece as views e templates para a landing page, a p\u00e1gina inicial p\u00f3s-login e o dashboard de BI.</li> <li>Controle de Acesso: Implementa o sistema de pap\u00e9is e permiss\u00f5es usando a biblioteca <code>django-role-permissions</code>.</li> <li>Agrega\u00e7\u00e3o de Dados: Suas views re\u00fanem dados de v\u00e1rios apps para criar uma experi\u00eancia de usu\u00e1rio unificada.</li> <li>Funcionalidades Transversais: Cont\u00e9m a l\u00f3gica para a busca global e o calend\u00e1rio de eventos.</li> <li>Utilit\u00e1rios: Oferece middlewares e template tags customizadas para uso em todo o projeto.</li> </ul>"},{"location":"apps/core/#sistema-de-papeis-roles","title":"Sistema de Pap\u00e9is (Roles)","text":"<p>O controle de acesso no SisCoE \u00e9 gerenciado pelo <code>django-role-permissions</code> e configurado em <code>core/roles.py</code>. Os seguintes pap\u00e9is s\u00e3o definidos:</p> <p>Papel: <code>Basico</code></p> <p>Descri\u00e7\u00e3o: Papel fundamental com permiss\u00f5es de visualiza\u00e7\u00e3o essenciais. Permiss\u00f5es Chave: - Visualizar dashboard e perfil. - Gerenciar seus pr\u00f3prios lembretes e tarefas. - Visualizar documentos e calcular tempo de servi\u00e7o.</p> <p>Papel: <code>SGB</code></p> <p>Herda de: <code>Basico</code> Descri\u00e7\u00e3o: Destinado a usu\u00e1rios que operam no n\u00edvel de um Subgrupamento de Bombeiros (SGB). Permiss\u00f5es Adicionais: - Visualizar cadastros, promo\u00e7\u00f5es e situa\u00e7\u00f5es do efetivo. - Acessar relat\u00f3rios (<code>rpt</code>) e adicionais.</p> <p>Papel: <code>Gestor</code></p> <p>Herda de: <code>SGB</code> Descri\u00e7\u00e3o: Usu\u00e1rios com capacidade de gerenciar (criar, editar, excluir) os dados do sistema. Permiss\u00f5es Adicionais: - Gerenciamento completo do cadastro de efetivo. - Gerenciamento de documentos e relat\u00f3rios. - Visualiza\u00e7\u00e3o de usu\u00e1rios do sistema.</p> <p>Papel: <code>Visitante</code></p> <p>Descri\u00e7\u00e3o: Papel com acesso muito limitado, geralmente para usu\u00e1rios n\u00e3o autenticados ou com pouqu\u00edssimas permiss\u00f5es. Permiss\u00f5es Chave: - Apenas visualizar a p\u00e1gina inicial e documentos p\u00fablicos.</p> <p>Papel: <code>Admin</code></p> <p>Descri\u00e7\u00e3o: Papel de superusu\u00e1rio com acesso irrestrito a todas as funcionalidades. Este papel n\u00e3o tem limita\u00e7\u00f5es.</p>"},{"location":"apps/core/#views-e-endpoints","title":"Views e Endpoints","text":"<p>As views do app <code>core</code> s\u00e3o o ponto de entrada para as principais p\u00e1ginas do sistema.</p> <code>/</code> (P\u00e1gina de Entrada)  **View**: `capa(request)` **Template**: `landing.html`  Renderiza a p\u00e1gina de entrada (landing page) para usu\u00e1rios n\u00e3o autenticados.  <code>/home</code> (P\u00e1gina Inicial)  **View**: `index(request)` **Template**: `index.html`  Esta \u00e9 a p\u00e1gina principal que um usu\u00e1rio v\u00ea ap\u00f3s o login. \u00c9 uma view complexa que agrega m\u00faltiplas informa\u00e7\u00f5es: - Aniversariantes do m\u00eas. - Documentos recentes. - Lembretes e tarefas do usu\u00e1rio. - Hierarquia de comando (Comandante, Subcomandante, Chefes). - Imagens para o carrossel da p\u00e1gina inicial.  <code>/dashboard/</code>  **View**: `dashboard_view(request)` **Template**: `dashboard.html`  Renderiza o dashboard de Business Intelligence (BI), que exibe m\u00e9tricas e gr\u00e1ficos sobre o efetivo: - Efetivo fixado vs. existente. - Percentual de \"claro\" (vagas n\u00e3o preenchidas). - Distribui\u00e7\u00e3o de efetivo por SGB. - Movimenta\u00e7\u00f5es recentes. - Gr\u00e1ficos de distribui\u00e7\u00e3o por idade, posto/gradua\u00e7\u00e3o e sa\u00fade.  <code>/calendario/</code>  **View**: `CalendarioView.as_view()` **Template**: `calendario.html`  Exibe um calend\u00e1rio completo com eventos do grupamento, feriados nacionais, estaduais e municipais.  <code>/search/</code>  **View**: `global_search_view(request)` **Template**: `global_search/results.html`  Processa as requisi\u00e7\u00f5es da barra de busca global, utilizando a classe `GlobalSearch` para encontrar resultados em m\u00faltiplos apps."},{"location":"apps/core/#componentes-adicionais","title":"Componentes Adicionais","text":""},{"location":"apps/core/#middleware","title":"Middleware","text":"<ul> <li><code>JSONMessagesMiddleware</code>: Intercepta respostas JSON e injeta nelas quaisquer mensagens pendentes do <code>django.contrib.messages</code>. \u00datil para requisi\u00e7\u00f5es AJAX/HTMX onde a resposta n\u00e3o \u00e9 uma p\u00e1gina HTML completa.</li> </ul>"},{"location":"apps/core/#comandos-de-gerenciamento","title":"Comandos de Gerenciamento","text":"<ul> <li><code>link_profiles</code>: Um comando customizado (<code>python manage.py link_profiles</code>) que provavelmente \u00e9 usado para associar perfis de usu\u00e1rio a outros registros no sistema (possivelmente legados, dado que o model <code>Profile</code> foi removido).</li> </ul>"},{"location":"apps/core/#template-tags","title":"Template Tags","text":"<p>O app <code>core</code> fornece v\u00e1rias template tags customizadas em <code>core/templatetags/</code>: - <code>dict_filters.py</code>: Filtros para manipula\u00e7\u00e3o de dicion\u00e1rios nos templates. - <code>messages_extras.py</code> e <code>messages_tag.py</code>: Tags e filtros para aprimorar a exibi\u00e7\u00e3o de mensagens do Django.</p>"},{"location":"apps/crm/","title":"App: CRM","text":"<p>Apesar do nome, o app <code>crm</code> no SisCoE atualmente serve a um prop\u00f3sito muito espec\u00edfico e contido: ele funciona como um m\u00f3dulo de formul\u00e1rio de contato.</p> <p>Sua \u00fanica responsabilidade \u00e9 fornecer um endpoint para receber dados de um formul\u00e1rio de contato e envi\u00e1-los por e-mail.</p> <p>Funcionalidade Atual vs. Nome</p> <p>O nome \"CRM\" (Customer Relationship Management) sugere uma funcionalidade mais ampla, como gerenciamento de leads ou contatos. No entanto, em seu estado atual, o app n\u00e3o possui modelos de dados (<code>models.py</code> est\u00e1 vazio) e se limita a processar um formul\u00e1rio de contato.</p>"},{"location":"apps/crm/#fluxo-de-operacao","title":"Fluxo de Opera\u00e7\u00e3o","text":"<p>O fluxo do app \u00e9 linear e simples:</p> <ol> <li>Um usu\u00e1rio (ou um sistema externo) envia uma requisi\u00e7\u00e3o <code>POST</code> para o endpoint <code>/contact/</code>.</li> <li>Os dados da requisi\u00e7\u00e3o s\u00e3o validados pelo <code>ContactForm</code>.</li> <li>Se o formul\u00e1rio for v\u00e1lido, a view <code>send_contact</code> utiliza a fun\u00e7\u00e3o <code>send_mail</code> do Django para enviar um e-mail com o conte\u00fado do formul\u00e1rio.</li> <li>Ap\u00f3s o envio, o usu\u00e1rio \u00e9 redirecionado para a p\u00e1gina inicial (<code>core:index</code>).</li> </ol> <pre><code>sequenceDiagram\n    participant Usu\u00e1rio\n    participant \"View (send_contact)\"\n    participant \"Servidor de E-mail\"\n\n    Usu\u00e1rio-&gt;&gt;View (send_contact): POST /contact/ com dados do formul\u00e1rio\n    View (send_contact)-&gt;&gt;View (send_contact): Valida dados com `ContactForm`\n    alt Formul\u00e1rio V\u00e1lido\n        View (send_contact)-&gt;&gt;Servidor de E-mail: send_mail()\n        Servidor de E-mail--&gt;&gt;View (send_contact): E-mail enviado\n        View (send_contact)-&gt;&gt;Usu\u00e1rio: Redirect para a p\u00e1gina inicial\n    else Formul\u00e1rio Inv\u00e1lido\n        View (send_contact)--&gt;&gt;Usu\u00e1rio: (Ignora e redireciona)\n    end\n</code></pre>"},{"location":"apps/crm/#componentes-principais","title":"Componentes Principais","text":""},{"location":"apps/crm/#formulario-formspy","title":"Formul\u00e1rio (<code>forms.py</code>)","text":"<ul> <li><code>ContactForm</code>: Um formul\u00e1rio simples do Django que define os campos esperados:<ul> <li><code>name</code> (CharField)</li> <li><code>email</code> (EmailField)</li> <li><code>title</code> (CharField)</li> <li><code>body</code> (CharField com widget de Textarea)</li> </ul> </li> </ul>"},{"location":"apps/crm/#view-viewspy","title":"View (<code>views.py</code>)","text":"<ul> <li><code>send_contact(request)</code>:<ul> <li>Aceita apenas requisi\u00e7\u00f5es <code>POST</code>.</li> <li>Valida os dados recebidos usando o <code>ContactForm</code>.</li> <li>Se v\u00e1lido, envia um e-mail e redireciona.</li> </ul> </li> </ul> <p>Configura\u00e7\u00e3o de Destinat\u00e1rio</p> <p>Atualmente, a view <code>send_contact</code> est\u00e1 configurada para enviar e-mails para o destinat\u00e1rio <code>['localhost']</code>. Esta \u00e9 uma configura\u00e7\u00e3o de desenvolvimento e precisa ser alterada para um endere\u00e7o de e-mail de produ\u00e7\u00e3o real para que a funcionalidade seja \u00fatil.</p> <pre><code># crm/views.py\n\nsend_mail(\n    subject,\n    message,\n    sender,\n    ['localhost'],  # &lt;-- ATEN\u00c7\u00c3O: Mudar para produ\u00e7\u00e3o\n    fail_silently=False,\n)\n</code></pre>"},{"location":"apps/crm/#url-urlspy","title":"URL (<code>urls.py</code>)","text":"<p>O app exp\u00f5e um \u00fanico endpoint:</p> <ul> <li><code>path('contact/', v.send_contact, name='send_contact')</code></li> </ul>"},{"location":"apps/cursos/","title":"App: Cursos","text":"<p>O app <code>cursos</code>, apesar do nome, possui uma responsabilidade dupla: ele \u00e9 o m\u00f3dulo respons\u00e1vel por gerenciar tanto as qualifica\u00e7\u00f5es (cursos) quanto as condecora\u00e7\u00f5es (medalhas) dos militares.</p> <p>Ele funciona como um registro central do desenvolvimento profissional e dos m\u00e9ritos de cada indiv\u00edduo no sistema.</p>"},{"location":"apps/cursos/#modelo-de-dados","title":"Modelo de Dados","text":"<p>O app utiliza dois modelos principais, um para cada tipo de registro.</p> <ul> <li><code>Curso</code>: Armazena os detalhes de um curso conclu\u00eddo por um militar, incluindo o nome do curso, a data e o boletim de publica\u00e7\u00e3o.</li> <li><code>Medalha</code>: Armazena os detalhes de uma medalha ou honraria recebida por um militar. O campo <code>honraria</code> \u00e9 um <code>CharField</code> com uma lista de <code>choices</code> pr\u00e9-definidas extremamente extensa, cobrindo centenas de condecora\u00e7\u00f5es militares e civis.</li> </ul> <p>Modelo <code>cursos.models.Curso</code></p> <p>               Bases: <code>Model</code></p> <p>Modelo <code>cursos.models.Medalha</code></p> <p>               Bases: <code>Model</code></p>"},{"location":"apps/cursos/#funcionalidades-principais","title":"Funcionalidades Principais","text":""},{"location":"apps/cursos/#gerenciamento-de-qualificacoes","title":"Gerenciamento de Qualifica\u00e7\u00f5es","text":"<p>O app oferece um CRUD (Create, Read, Update, Delete) completo tanto para Cursos quanto para Medalhas. Uma caracter\u00edstica not\u00e1vel \u00e9 a cria\u00e7\u00e3o em lote, onde a interface permite ao usu\u00e1rio adicionar m\u00faltiplos cursos ou medalhas para um mesmo militar em uma \u00fanica opera\u00e7\u00e3o.</p>"},{"location":"apps/cursos/#interface-dupla-admin-e-usuario","title":"Interface Dupla: Admin e Usu\u00e1rio","text":"<p>As funcionalidades s\u00e3o espelhadas em duas interfaces distintas: -   Vis\u00e3o do Administrador: Views como <code>curso_list</code> e <code>medalha_list</code> permitem que gestores com as devidas permiss\u00f5es gerenciem os registros de todos os militares. -   Vis\u00e3o do Usu\u00e1rio (\"Meus...\"): Views como <code>user_curso_list</code> e <code>user_medalha_list</code> permitem que o pr\u00f3prio usu\u00e1rio logado visualize, adicione e gerencie seus pr\u00f3prios cursos e medalhas, promovendo a autonomia e a manuten\u00e7\u00e3o dos dados.</p>"},{"location":"apps/cursos/#importacao-e-exportacao-django-import-export","title":"Importa\u00e7\u00e3o e Exporta\u00e7\u00e3o (<code>django-import-export</code>)","text":"<p>O app integra-se com a biblioteca <code>django-import-export</code> atrav\u00e9s dos arquivos <code>resources.py</code> (<code>CursoResource</code>, <code>MedalhaResource</code>). Isso adiciona, diretamente na interface de administra\u00e7\u00e3o do Django, funcionalidades poderosas para: -   Exportar todos os dados de cursos ou medalhas para formatos como CSV, XLSX, etc. -   Importar dados em massa a partir de uma planilha, facilitando a carga inicial de dados ou atualiza\u00e7\u00f5es em lote.</p>"},{"location":"apps/cursos/#endpoints-urls-principais","title":"Endpoints (URLs) Principais","text":"<p>O app possui um conjunto de URLs para cada entidade (Cursos e Medalhas) e para cada tipo de interface (Admin e Usu\u00e1rio).</p> URL View Interface Descri\u00e7\u00e3o <code>/cursos/</code> <code>curso_list</code> Admin Lista os cursos de todos os militares. <code>/cursos/cadastrar/</code> <code>curso_create</code> Admin Formul\u00e1rio para cadastrar cursos para um militar. <code>/medalhas/</code> <code>medalha_list</code> Admin Lista as medalhas de todos os militares. <code>/medalhas/cadastrar/</code> <code>medalha_create</code> Admin Formul\u00e1rio para cadastrar medalhas para um militar. <code>/meus-cursos/</code> <code>user_curso_list</code> Usu\u00e1rio Lista os cursos do usu\u00e1rio logado. <code>/meus-cursos/novo/</code> <code>user_curso_create</code> Usu\u00e1rio Permite ao usu\u00e1rio logado adicionar um novo curso a seu perfil. <code>/meus-medalhas/</code> <code>user_medalha_list</code> Usu\u00e1rio Lista as medalhas do usu\u00e1rio logado. <code>/meus-medalhas/novo/</code> <code>user_medalha_create</code> Usu\u00e1rio Permite ao usu\u00e1rio logado adicionar uma nova medalha a seu perfil."},{"location":"apps/documentos/","title":"App: Documentos","text":"<p>O app <code>documentos</code> funciona como o Sistema de Gerenciamento de Documentos (DMS) do SisCoE. Ele \u00e9 projetado para lidar com o upload, armazenamento, categoriza\u00e7\u00e3o e visualiza\u00e7\u00e3o de arquivos e documentos relacionados \u00e0s opera\u00e7\u00f5es do sistema.</p>"},{"location":"apps/documentos/#modelo-de-dados","title":"Modelo de Dados","text":"<p>A arquitetura de dados separa de forma inteligente os metadados de um documento dos seus arquivos f\u00edsicos, permitindo que um \u00fanico \"documento\" conceitual contenha m\u00faltiplos anexos.</p> <pre><code>erDiagram\n    Documento ||--|{ Arquivo : \"cont\u00e9m\"\n\n    Documento {\n        int id PK\n        string assunto\n        string numero_documento\n        date data_publicacao\n        string descricao\n        string tipo\n    }\n\n    Arquivo {\n        int id PK\n        int documento_id FK\n        FileField arquivo\n        string tipo\n    }\n</code></pre> <ul> <li><code>Documento</code>: Este modelo atua como um cont\u00eainer ou uma \"pasta\". Ele armazena os metadados que descrevem o conjunto de arquivos, como <code>assunto</code>, <code>numero_documento</code>, <code>data_publicacao</code>, e uma <code>descricao</code> que suporta Markdown.</li> <li><code>Arquivo</code>: Representa um arquivo f\u00edsico individual (<code>.pdf</code>, <code>.jpg</code>, <code>.mp4</code>, etc.). Cada registro <code>Arquivo</code> est\u00e1 ligado a um <code>Documento</code> e armazena o arquivo em si no sistema de arquivos (na pasta <code>documentos/</code>).</li> </ul> <p>Modelo <code>documentos.models.Documento</code></p> <p>               Bases: <code>Model</code></p> <p>Modelo <code>documentos.models.Arquivo</code></p> <p>               Bases: <code>Model</code></p>"},{"location":"apps/documentos/#fluxo-de-trabalho","title":"Fluxo de Trabalho","text":""},{"location":"apps/documentos/#criacao-de-um-documento","title":"Cria\u00e7\u00e3o de um Documento","text":"<ol> <li>O usu\u00e1rio acessa a view <code>criar_documento</code>.</li> <li>Ele preenche os metadados do documento (assunto, n\u00famero, etc.).</li> <li>Na mesma tela, ele pode selecionar m\u00faltiplos arquivos para upload. Para cada arquivo, ele define o <code>tipo</code> (PDF, Imagem, V\u00eddeo, etc.).</li> <li>Ao submeter, o sistema primeiro cria o registro <code>Documento</code> e, em seguida, cria um registro <code>Arquivo</code> para cada arquivo enviado, associando todos ao <code>Documento</code> rec\u00e9m-criado.</li> </ol>"},{"location":"apps/documentos/#gerenciamento-de-anexos","title":"Gerenciamento de Anexos","text":"<p>Ap\u00f3s a cria\u00e7\u00e3o, os arquivos de um documento podem ser gerenciados: -   Adicionar: A view <code>editar_documento_arquivos</code> permite que novos arquivos sejam anexados a um documento existente. -   Excluir: A exclus\u00e3o de um anexo individual \u00e9 feita de forma ass\u00edncrona (via AJAX) atrav\u00e9s da view <code>excluir_arquivo</code>, proporcionando uma experi\u00eancia de usu\u00e1rio mais fluida sem a necessidade de recarregar a p\u00e1gina.</p>"},{"location":"apps/documentos/#funcionalidades-notaveis","title":"Funcionalidades Not\u00e1veis","text":"<ul> <li>Galeria de Documentos (<code>galeria_documentos</code>): Uma interface visual que exibe os documentos como \"cards\", mostrando seus anexos. A galeria possui filtros por assunto e data, facilitando a busca e a navega\u00e7\u00e3o.</li> <li>Visualiza\u00e7\u00e3o de Conte\u00fado (<code>carregar_conteudo_arquivo</code>): O sistema permite a visualiza\u00e7\u00e3o de certos tipos de arquivo diretamente no navegador, como PDFs e arquivos de texto, sem a necessidade de download.</li> </ul>"},{"location":"apps/documentos/#endpoints-urls-principais","title":"Endpoints (URLs) Principais","text":"URL View Nome da URL Descri\u00e7\u00e3o <code>/</code> <code>listar_documentos</code> <code>listar_documentos</code> Lista todos os documentos em formato de tabela, com filtros. <code>/documento/&lt;int:pk&gt;/</code> <code>detalhe_documento</code> <code>detalhe_documento</code> Exibe a p\u00e1gina de detalhes de um documento e seus anexos. <code>/documento/criar/</code> <code>criar_documento</code> <code>criar_documento</code> Formul\u00e1rio para criar um novo documento com seus anexos. <code>/documento/&lt;int:pk&gt;/editar/</code> <code>editar_documento</code> <code>editar_documento</code> Permite editar os metadados de um documento. <code>/arquivo/excluir/&lt;int:pk&gt;/</code> <code>excluir_arquivo</code> <code>excluir_arquivo</code> Endpoint (AJAX) para excluir um anexo espec\u00edfico. <code>/galeria/</code> <code>galeria_documentos</code> <code>galeria_documentos</code> Exibe uma galeria visual e filtr\u00e1vel de documentos."},{"location":"apps/efetivo/","title":"App: Efetivo","text":"<p>O app <code>efetivo</code> \u00e9 o m\u00f3dulo central do SisCoE, funcionando como o Sistema de Registros (System of Record) para todas as informa\u00e7\u00f5es pessoais e funcionais dos militares. Ele gerencia desde o cadastro inicial at\u00e9 o hist\u00f3rico completo de promo\u00e7\u00f5es, movimenta\u00e7\u00f5es e status operacional de cada indiv\u00edduo.</p>"},{"location":"apps/efetivo/#modelo-de-dados","title":"Modelo de Dados","text":"<p>A arquitetura de dados do <code>efetivo</code> \u00e9 projetada para ser robusta e audit\u00e1vel. Em vez de simplesmente atualizar registros, o sistema frequentemente cria novos registros de estado e move os antigos para tabelas de hist\u00f3rico, preservando uma trilha completa de mudan\u00e7as.</p> <pre><code>erDiagram\n    Cadastro ||--o{ Promocao : \"tem\"\n    Cadastro ||--o{ DetalhesSituacao : \"tem\"\n    Cadastro ||--o{ CatEfetivo : \"tem\"\n    Cadastro ||--o{ Imagem : \"tem\"\n    Cadastro }|..|| User : \"est\u00e1 ligado a\"\n\n    Promocao ||--o{ HistoricoPromocao : \"gera hist\u00f3rico\"\n    DetalhesSituacao ||--o{ HistoricoDetalhesSituacao : \"gera hist\u00f3rico\"\n    CatEfetivo ||--o{ HistoricoCatEfetivo : \"gera hist\u00f3rico\"\n\n    Cadastro {\n        int id PK\n        string re\n        string nome\n        string nome_de_guerra\n        date nasc\n        date admissao\n        string cpf\n        string email\n    }\n\n    Promocao {\n        int id PK\n        int cadastro_id FK\n        string posto_grad\n        date ultima_promocao\n    }\n\n    DetalhesSituacao {\n        int id PK\n        int cadastro_id FK\n        string situacao\n        string sgb\n        string posto_secao\n        string funcao\n        date apresentacao_na_unidade\n    }\n\n    CatEfetivo {\n        int id PK\n        int cadastro_id FK\n        string tipo \"ATIVO, FERIAS, LTS, etc.\"\n        date data_inicio\n        date data_termino\n        bool ativo\n        bool restricao_au\n        bool restricao_ou\n        string observacao\n    }\n</code></pre>"},{"location":"apps/efetivo/#cadastro","title":"<code>Cadastro</code>","text":"<p>Este \u00e9 o modelo principal, a \"ficha\" do militar. Cont\u00e9m dados pessoais e funcionais que raramente mudam.</p> <p>Modelo <code>efetivo.models.Cadastro</code></p> <p>               Bases: <code>Model</code></p>"},{"location":"apps/efetivo/#promocao-e-historicopromocao","title":"<code>Promocao</code> e <code>HistoricoPromocao</code>","text":"<p>O modelo <code>Promocao</code> armazena o posto ou gradua\u00e7\u00e3o atual do militar. Toda vez que uma promo\u00e7\u00e3o \u00e9 editada, um registro \u00e9 criado em <code>HistoricoPromocao</code> para manter o hist\u00f3rico.</p> <p>Modelo <code>efetivo.models.Promocao</code></p> <p>               Bases: <code>Model</code></p>"},{"location":"apps/efetivo/#detalhessituacao-e-historicodetalhessituacao","title":"<code>DetalhesSituacao</code> e <code>HistoricoDetalhesSituacao</code>","text":"<p>Similar \u00e0 promo\u00e7\u00e3o, <code>DetalhesSituacao</code> armazena a situa\u00e7\u00e3o funcional atual do militar (onde ele est\u00e1, qual sua fun\u00e7\u00e3o, etc.). Altera\u00e7\u00f5es nesta situa\u00e7\u00e3o s\u00e3o registradas em <code>HistoricoDetalhesSituacao</code>.</p> <p>Modelo <code>efetivo.models.DetalhesSituacao</code></p> <p>               Bases: <code>Model</code></p>"},{"location":"apps/efetivo/#catefetivo-e-historicocatefetivo","title":"<code>CatEfetivo</code> e <code>HistoricoCatEfetivo</code>","text":"<p>Este \u00e9 um dos modelos mais complexos. Ele gerencia o status operacional do militar. Um militar pode ter v\u00e1rias categorias ao longo do tempo (F\u00e9rias, Licen\u00e7a, etc.), mas geralmente apenas uma est\u00e1 ativa.</p> <ul> <li>Tipos: O campo <code>tipo</code> pode ser <code>ATIVO</code>, <code>FERIAS</code>, <code>LTS</code> (Licen\u00e7a para Tratamento de Sa\u00fade), <code>LSV</code> (Licen\u00e7a para Servi\u00e7o Volunt\u00e1rio), <code>RESTRICAO</code>, etc.</li> <li>Restri\u00e7\u00f5es M\u00e9dicas: Se o <code>tipo</code> for <code>RESTRICAO</code>, o modelo possui dezenas de campos booleanos (<code>restricao_au</code>, <code>restricao_ou</code>, etc.) para detalhar exatamente quais atividades o militar n\u00e3o pode realizar.</li> </ul> <p>Modelo <code>efetivo.models.CatEfetivo</code></p> <p>               Bases: <code>Model</code></p>"},{"location":"apps/efetivo/#backend.efetivo.models.CatEfetivo.restricoes_selecionadas","title":"<code>restricoes_selecionadas</code>  <code>property</code>","text":"<p>Retorna uma lista com as restri\u00e7\u00f5es selecionadas</p>"},{"location":"apps/efetivo/#backend.efetivo.models.CatEfetivo.restricoes_selecionadas_badges","title":"<code>restricoes_selecionadas_badges</code>  <code>property</code>","text":"<p>Retorna badges HTML com as restri\u00e7\u00f5es selecionadas</p>"},{"location":"apps/efetivo/#backend.efetivo.models.CatEfetivo.criar_registro_historico","title":"<code>criar_registro_historico()</code>","text":"<p>Cria um registro no hist\u00f3rico com o estado atual</p>"},{"location":"apps/efetivo/#principais-fluxos-de-trabalho","title":"Principais Fluxos de Trabalho","text":""},{"location":"apps/efetivo/#visualizacao-de-um-militar-ver_militar","title":"Visualiza\u00e7\u00e3o de um Militar (<code>ver_militar</code>)","text":"<p>A view <code>ver_militar</code> \u00e9 a p\u00e1gina de perfil de um militar. Ela \u00e9 altamente otimizada para agregar e exibir informa\u00e7\u00f5es de todos os modelos relacionados em uma \u00fanica tela, incluindo: - Dados pessoais do <code>Cadastro</code>. - Posto/Gradua\u00e7\u00e3o atual da <code>Promocao</code>. - Situa\u00e7\u00e3o funcional atual de <code>DetalhesSituacao</code>. - Status operacional (f\u00e9rias, licen\u00e7a, etc.) de <code>CatEfetivo</code>. - Lista de cursos e medalhas (dos apps <code>cursos</code> e <code>adicional</code>). - Hist\u00f3rico de Licen\u00e7as Pr\u00eamio (do app <code>lp</code>).</p>"},{"location":"apps/efetivo/#edicao-e-historico","title":"Edi\u00e7\u00e3o e Hist\u00f3rico","text":"<p>Quando um gestor edita a situa\u00e7\u00e3o funcional ou a promo\u00e7\u00e3o de um militar atrav\u00e9s das views <code>editar_situacao_funcional</code> ou <code>editar_posto_graduacao</code>, o sistema: 1.  Cria uma c\u00f3pia do registro atual e a salva na tabela de hist\u00f3rico (<code>HistoricoDetalhesSituacao</code> ou <code>HistoricoPromocao</code>). 2.  Atualiza o registro principal (<code>DetalhesSituacao</code> ou <code>Promocao</code>) com as novas informa\u00e7\u00f5es.</p> <p>Isso garante que nenhuma informa\u00e7\u00e3o seja perdida e que todo o hist\u00f3rico de carreira do militar seja rastre\u00e1vel.</p>"},{"location":"apps/efetivo/#endpoints-urls-principais","title":"Endpoints (URLs) Principais","text":"URL View Nome da URL Descri\u00e7\u00e3o <code>/cadastrar_militar/</code> <code>cadastrar_militar</code> <code>cadastrar_militar</code> Exibe o formul\u00e1rio para criar um novo militar. <code>/listar_militar/</code> <code>listar_militar</code> <code>listar_militar</code> Lista todos os militares com status \"Efetivo\". <code>/ver_militar/&lt;int:id&gt;/</code> <code>ver_militar</code> <code>ver_militar</code> Exibe a p\u00e1gina de perfil detalhada de um militar. <code>/excluir_militar/&lt;int:id&gt;/</code> <code>excluir_militar</code> <code>excluir_militar</code> Exclui o registro de um militar. <code>/editar_posto_graduacao/&lt;int:id&gt;/</code> <code>editar_posto_graduacao</code> <code>editar_posto_graduacao</code> Edita a promo\u00e7\u00e3o de um militar e cria um registro de hist\u00f3rico. <code>/editar_situacao_funcional/&lt;int:id&gt;/</code> <code>editar_situacao_funcional</code> <code>editar_situacao_funcional</code> Edita a situa\u00e7\u00e3o funcional e cria um registro de hist\u00f3rico. <code>/militar/&lt;int:id&gt;/adicionar-categoria/</code> <code>adicionar_categoria_efetivo</code> <code>adicionar_categoria_efetivo</code> Adiciona um novo status operacional (f\u00e9rias, licen\u00e7a, etc.). <code>/militar/&lt;int:id&gt;/historico-categorias/</code> <code>historico_categorias</code> <code>historico_categorias</code> Exibe o hist\u00f3rico de todas as categorias de um militar. <code>/historico_movimentacoes/&lt;int:id&gt;/</code> <code>historico_movimentacoes</code> <code>historico_movimentacoes</code> Exibe o hist\u00f3rico de promo\u00e7\u00f5es e situa\u00e7\u00f5es de um militar."},{"location":"apps/efetivo/#sinais-e-automacoes-signalspy","title":"Sinais e Automa\u00e7\u00f5es (<code>signals.py</code>)","text":"<p>O app <code>efetivo</code> utiliza sinais do Django para automatizar certas l\u00f3gicas de neg\u00f3cio:</p> <ul> <li> <p><code>sync_cadastro_to_profiles(sender, instance, ...)</code>:</p> <ul> <li>Gatilho: <code>post_save</code> no modelo <code>Cadastro</code>.</li> <li>A\u00e7\u00e3o: Quando um registro de <code>Cadastro</code> \u00e9 salvo (criado ou atualizado), este sinal \u00e9 disparado para encontrar o <code>Profile</code> (do app <code>core</code>) associado e sincronizar os dados (como posto/grad, tipo, cpf), garantindo que as informa\u00e7\u00f5es do perfil do usu\u00e1rio estejam sempre alinhadas com sua ficha no efetivo.</li> </ul> </li> <li> <p><code>criar_historico_apos_save(sender, instance, ...)</code>:</p> <ul> <li>Gatilho: <code>post_save</code> no modelo <code>CatEfetivo</code>.</li> <li>A\u00e7\u00e3o: Quando uma categoria de efetivo \u00e9 atualizada (n\u00e3o na cria\u00e7\u00e3o), este sinal chama o m\u00e9todo <code>criar_registro_historico()</code> para garantir que a altera\u00e7\u00e3o seja registrada na tabela de hist\u00f3rico.</li> </ul> </li> <li> <p><code>verificar_data_termino(sender, instance, ...)</code>:</p> <ul> <li>Gatilho: <code>pre_save</code> no modelo <code>CatEfetivo</code>.</li> <li>A\u00e7\u00e3o: Antes de salvar uma <code>CatEfetivo</code>, este sinal verifica se a <code>data_termino</code> j\u00e1 passou. Se sim, ele automaticamente muda o <code>tipo</code> da categoria para <code>ATIVO</code> e anula a data de t\u00e9rmino, garantindo que afastamentos expirados sejam corretamente revertidos.</li> </ul> </li> </ul>"},{"location":"apps/lp/","title":"App: LP (Licen\u00e7a Pr\u00eamio)","text":"<p>O app <code>lp</code> \u00e9 um m\u00f3dulo completo e robusto para gerenciar todo o ciclo de vida da Licen\u00e7a Pr\u00eamio (LP) dos militares. O processo \u00e9 inteligentemente dividido em duas fases principais: a Aquisi\u00e7\u00e3o do Direito e a Frui\u00e7\u00e3o do Direito.</p>"},{"location":"apps/lp/#fase-1-aquisicao-do-direito","title":"Fase 1: Aquisi\u00e7\u00e3o do Direito","text":"<p>Esta fase consiste em acompanhar o per\u00edodo de 5 anos (per\u00edodo aquisitivo) que um militar deve cumprir para ter direito a 90 dias de licen\u00e7a.</p>"},{"location":"apps/lp/#modelo-lp","title":"Modelo <code>LP</code>","text":"<p>O modelo <code>LP</code> \u00e9 o cora\u00e7\u00e3o desta fase. Cada registro representa um bloco de 5 anos na carreira do militar.</p> <p>Modelo <code>lp.models.LP</code></p> <p>               Bases: <code>Model</code></p>"},{"location":"apps/lp/#backend.lp.models.LP.data_fim_periodo_lp","title":"<code>data_fim_periodo_lp</code>  <code>property</code>","text":"<p>Calcula a data de fim do per\u00edodo aquisitivo (\u00faltimo LP + 5 anos) Retorna None se data_ultimo_lp n\u00e3o estiver definida</p>"},{"location":"apps/lp/#workflow-de-aquisicao","title":"Workflow de Aquisi\u00e7\u00e3o","text":"<p>O status de um bloco de LP (<code>status_lp</code>) progride atrav\u00e9s do seguinte workflow:</p> <pre><code>stateDiagram-v2\n    direction LR\n    [*] --&gt; Aguardando_Requisitos: In\u00edcio do per\u00edodo\n    Aguardando_Requisitos --&gt; Apta_para_Concessao: 5 anos cumpridos\n    Apta_para_Concessao --&gt; Lancado_no_SIPA: Gestor registra\n    Lancado_no_SIPA --&gt; Concedido: Processamento\n    Concedido --&gt; Publicado: Publica\u00e7\u00e3o em Boletim\n    Publicado --&gt; Concluido: Ciclo finalizado\n</code></pre> <ol> <li>Aguardando Requisitos: O per\u00edodo de 5 anos est\u00e1 em andamento.</li> <li>Apta para Concess\u00e3o: O per\u00edodo de 5 anos foi cumprido. A LP est\u00e1 pronta para ser concedida.</li> <li>Lan\u00e7ado no SIPA: Um gestor confirma que a LP foi lan\u00e7ada no Sistema Integrado de Pagamentos.</li> <li>Concedido: A LP foi oficialmente concedida.</li> <li>Publicado: Os dados da publica\u00e7\u00e3o em Boletim Geral (BOL G PM) s\u00e3o registrados.</li> <li>Conclu\u00eddo: O ciclo de aquisi\u00e7\u00e3o termina. Neste ponto, o sistema automaticamente inicia a Fase 2.</li> </ol>"},{"location":"apps/lp/#fase-2-fruicao-do-direito","title":"Fase 2: Frui\u00e7\u00e3o do Direito","text":"<p>Uma vez que um bloco de <code>LP</code> \u00e9 marcado como <code>Conclu\u00eddo</code>, o militar passa a ter um saldo de 90 dias para usufruir. Esta fase gerencia o uso desse saldo.</p>"},{"location":"apps/lp/#o-signal-de-transicao","title":"O <code>Signal</code> de Transi\u00e7\u00e3o","text":"<p>A transi\u00e7\u00e3o entre as fases \u00e9 automatizada pelo <code>signal</code> <code>criar_fruicao_ao_concluir_lp</code>. Quando uma <code>LP</code> \u00e9 salva com o status <code>Conclu\u00eddo</code>, este sinal cria automaticamente um registro no modelo <code>LP_fruicao</code>, creditando o saldo inicial de 90 dias.</p>"},{"location":"apps/lp/#modelo-lp_fruicao","title":"Modelo <code>LP_fruicao</code>","text":"<p>Este modelo representa o \"saldo\" da Licen\u00e7a Pr\u00eamio que o militar pode usar.</p> <ul> <li>Controle de Saldo: Gerencia os campos <code>dias_disponiveis</code> e <code>dias_utilizados</code>.</li> <li>Registro de Afastamentos: Permite registrar os per\u00edodos de afastamento (frui\u00e7\u00e3o de 15, 30, 45, 60, 75 ou 90 dias) ou a convers\u00e3o em pec\u00fania. Cada afastamento registrado debita o valor correspondente do saldo.</li> </ul> <p>Modelo <code>lp.models.LP_fruicao</code></p> <p>               Bases: <code>Model</code></p> <p>Modelo para armazenar informa\u00e7\u00f5es de frui\u00e7\u00e3o de LP, incluindo afastamentos.</p>"},{"location":"apps/lp/#backend.lp.models.LP_fruicao.dias_utilizados_percent","title":"<code>dias_utilizados_percent</code>  <code>property</code>","text":"<p>Retorna a porcentagem de dias utilizados para a barra de progresso.</p>"},{"location":"apps/lp/#auditoria-e-historico","title":"Auditoria e Hist\u00f3rico","text":"<p>Para garantir a m\u00e1xima rastreabilidade, cada altera\u00e7\u00e3o significativa gera um registro de hist\u00f3rico: -   <code>HistoricoLP</code>: Salva um snapshot de cada altera\u00e7\u00e3o feita em um registro <code>LP</code>. -   <code>HistoricoFruicaoLP</code>: Salva um snapshot de cada altera\u00e7\u00e3o feita em um registro <code>LP_fruicao</code>, registrando cada per\u00edodo de afastamento.</p>"},{"location":"apps/lp/#endpoints-urls-principais","title":"Endpoints (URLs) Principais","text":"URL View Fase Descri\u00e7\u00e3o <code>/cadastrar/</code> <code>cadastrar_lp</code> Aquisi\u00e7\u00e3o Inicia o cadastro de um novo bloco de LP para um militar. <code>/lista/</code> <code>listar_lp</code> Aquisi\u00e7\u00e3o Lista todas as LPs em andamento. <code>/&lt;int:pk&gt;/</code> <code>ver_lp</code> Ambas Exibe a p\u00e1gina de detalhes completa de uma LP, incluindo sua frui\u00e7\u00e3o. <code>/&lt;int:pk&gt;/concluir/</code> <code>concluir_lp</code> Aquisi\u00e7\u00e3o Conclui o ciclo de aquisi\u00e7\u00e3o e dispara a cria\u00e7\u00e3o da frui\u00e7\u00e3o. <code>/fruicao/&lt;int:pk&gt;/</code> <code>detalhar_fruicao</code> Frui\u00e7\u00e3o Exibe os detalhes do saldo e uso de uma LP. <code>/fruicao/&lt;int:pk&gt;/adicionar-afastamento/</code> <code>adicionar_afastamento</code> Frui\u00e7\u00e3o Adiciona um novo per\u00edodo de afastamento, debitando do saldo."},{"location":"apps/municipios/","title":"App: Municipios","text":"<p>O app <code>municipios</code> \u00e9 um m\u00f3dulo de Gest\u00e3o de Postos de Bombeiros e suas \u00c1reas de Atua\u00e7\u00e3o. Ele vai al\u00e9m de um simples cadastro de cidades, funcionando como um sistema de intelig\u00eancia organizacional e geogr\u00e1fica que mapeia a estrutura do grupamento.</p> <p>A principal fun\u00e7\u00e3o do app \u00e9 permitir a an\u00e1lise de efetivo previsto vs. efetivo real para cada unidade, al\u00e9m de fornecer ferramentas log\u00edsticas.</p>"},{"location":"apps/municipios/#modelo-de-dados","title":"Modelo de Dados","text":"<p>A arquitetura de dados \u00e9 centrada no conceito de <code>Posto</code>, com modelos relacionados que detalham suas caracter\u00edsticas.</p> <pre><code>erDiagram\n    Posto ||--|{ Contato : \"possui\"\n    Posto ||--|{ Pessoal : \"tem efetivo previsto\"\n    Posto ||--o{ Cidade : \"atende\"\n\n    Posto {\n        int id PK\n        string sgb\n        string posto_secao\n        string posto_atendimento\n        string cidade_posto\n    }\n\n    Contato {\n        int posto_id FK\n        string telefone\n        string rua\n        float latitude\n        float longitude\n    }\n\n    Pessoal {\n        int posto_id FK\n        int cel\n        int ten_cel\n        int maj\n        int cap\n        int st_sgt\n        int cb_sd\n    }\n\n    Cidade {\n        int posto_id FK\n        string municipio\n        string descricao\n    }\n</code></pre> <ul> <li><code>Posto</code>: O modelo central. Representa uma unidade f\u00edsica de bombeiros (ex: \"EB CERRADO\").</li> <li><code>Contato</code>: Armazena o endere\u00e7o, telefone e, crucialmente, as coordenadas de latitude e longitude de cada posto.</li> <li><code>Pessoal</code>: Define o efetivo previsto (QPO) para cada posto, detalhando a quantidade de vagas por patente.</li> <li><code>Cidade</code>: Mapeia quais munic\u00edpios s\u00e3o atendidos por cada posto, permitindo uma rela\u00e7\u00e3o de um-para-muitos (um posto pode cobrir v\u00e1rias cidades).</li> </ul> <p>Modelo <code>municipios.models.Posto</code></p> <p>               Bases: <code>Model</code></p> <p>Modelo <code>municipios.models.Pessoal</code></p> <p>               Bases: <code>Model</code></p>"},{"location":"apps/municipios/#funcionalidades-principais","title":"Funcionalidades Principais","text":""},{"location":"apps/municipios/#analise-de-efetivo-previsto-vs-real","title":"An\u00e1lise de Efetivo (Previsto vs. Real)","text":"<p>A funcionalidade mais importante do app \u00e9 a capacidade de comparar o efetivo planejado com o efetivo real. A view <code>posto_detail</code> realiza a seguinte opera\u00e7\u00e3o: 1.  Obt\u00e9m o efetivo previsto para um posto a partir do modelo <code>Pessoal</code>. 2.  Consulta o app <code>efetivo</code> para contar quantos militares (<code>efetivo.DetalhesSituacao</code>) est\u00e3o atualmente lotados naquele mesmo posto (<code>posto_secao</code>). 3.  Apresenta uma compara\u00e7\u00e3o lado a lado, permitindo que os gestores identifiquem rapidamente o \"claro\" (vagas n\u00e3o preenchidas) ou o \"excedente\" de pessoal em cada unidade.</p>"},{"location":"apps/municipios/#calculadora-de-rota","title":"Calculadora de Rota","text":"<p>Utilizando os dados de latitude e longitude do modelo <code>Contato</code>, a view <code>calcular_rota</code> oferece uma ferramenta log\u00edstica que: -   Permite ao usu\u00e1rio selecionar um posto de origem e um de destino. -   Calcula a dist\u00e2ncia em linha reta entre os dois pontos usando a biblioteca <code>geopy</code>. -   Estima o tempo de viagem com base em uma velocidade m\u00e9dia.</p>"},{"location":"apps/municipios/#importacao-e-exportacao","title":"Importa\u00e7\u00e3o e Exporta\u00e7\u00e3o","text":"<p>O m\u00f3dulo tamb\u00e9m inclui utilit\u00e1rios para gerenciar dados em massa, como a importa\u00e7\u00e3o de dados de munic\u00edpios a partir de planilhas e a exporta\u00e7\u00e3o de relat\u00f3rios em PDF e CSV.</p>"},{"location":"apps/municipios/#endpoints-urls-principais","title":"Endpoints (URLs) Principais","text":"URL View Nome da URL Descri\u00e7\u00e3o <code>/</code> <code>posto_list</code> <code>posto_list</code> Lista todos os postos de bombeiros cadastrados. <code>/&lt;int:pk&gt;/</code> <code>posto_detail</code> <code>posto_detail</code> Exibe a p\u00e1gina de detalhes de um posto, com a an\u00e1lise de efetivo. <code>/novo/</code> <code>posto_create</code> <code>posto_create</code> Formul\u00e1rio para criar um novo posto e seus dados relacionados. <code>/&lt;int:pk&gt;/editar/</code> <code>posto_update</code> <code>posto_update</code> Permite a edi\u00e7\u00e3o dos dados de um posto. <code>/calcular_rota/</code> <code>calcular_rota</code> <code>calcular_rota</code> Endpoint que processa o c\u00e1lculo de dist\u00e2ncia entre dois postos. <code>/importar/</code> <code>importar_municipios</code> <code>importar_municipios</code> P\u00e1gina para upload de arquivos para importa\u00e7\u00e3o de dados."},{"location":"apps/rpt/","title":"App: RPT (Requerimento para Transfer\u00eancia)","text":"<p>O app <code>rpt</code> \u00e9 o m\u00f3dulo do SisCoE respons\u00e1vel por gerenciar o Requerimento para Transfer\u00eancia de militares. Ele formaliza o processo de solicita\u00e7\u00e3o de movimenta\u00e7\u00e3o e, crucialmente, cria uma fila de espera transparente para cada se\u00e7\u00e3o de destino.</p>"},{"location":"apps/rpt/#modelo-de-dados","title":"Modelo de Dados","text":"<p>O app \u00e9 sustentado por dois modelos principais que trabalham em conjunto para gerenciar as solicita\u00e7\u00f5es e auditar o processo.</p> <ul> <li><code>Cadastro_rpt</code>: O modelo central. Cada registro representa uma solicita\u00e7\u00e3o de transfer\u00eancia ativa para um militar, vinculada ao seu <code>efetivo.Cadastro</code>. Ele armazena o destino desejado, as datas e o status atual da solicita\u00e7\u00e3o.</li> <li><code>HistoricoRpt</code>: Um modelo de auditoria que armazena um snapshot de cada altera\u00e7\u00e3o feita em um registro <code>Cadastro_rpt</code>, garantindo a rastreabilidade do processo.</li> </ul> <p>Modelo <code>rpt.models.Cadastro_rpt</code></p> <p>               Bases: <code>Model</code></p>"},{"location":"apps/rpt/#fluxo-de-trabalho-e-fila-de-espera","title":"Fluxo de Trabalho e Fila de Espera","text":"<p>O principal valor do m\u00f3dulo <code>rpt</code> \u00e9 a gest\u00e3o da fila de espera para transfer\u00eancias, que funciona da seguinte maneira:</p> <pre><code>sequenceDiagram\n    participant Gestor\n    participant Sistema\n    participant \"BD (RPT)\"\n\n    Gestor-&gt;&gt;Sistema: Acessa \"Cadastrar RPT\"\n    Sistema-&gt;&gt;Gestor: Exibe formul\u00e1rio\n    Gestor-&gt;&gt;Sistema: Preenche dados (Militar, Destino, Data) e salva\n    Sistema-&gt;&gt;BD (RPT): Cria novo registro `Cadastro_rpt` com status \"Aguardando\"\n    BD (RPT)--&gt;&gt;Sistema: Confirma cria\u00e7\u00e3o\n    Sistema-&gt;&gt;Gestor: Exibe lista de RPTs (`listar_rpt`)\n\n    %% Visualiza\u00e7\u00e3o da Fila %%\n    Gestor-&gt;&gt;Sistema: Clica em \"Ver Detalhes\" de um RPT (`ver_rpt`)\n    Sistema-&gt;&gt;BD (RPT): Consulta o RPT e calcula a posi\u00e7\u00e3o na fila\n    Note right of Sistema: Usa Window Function (RowNumber) particionada por `posto_secao_destino` e ordenada por `data_pedido`.\n    BD (RPT)--&gt;&gt;Sistema: Retorna o RPT com sua posi\u00e7\u00e3o na fila\n    Sistema-&gt;&gt;Gestor: Exibe a posi\u00e7\u00e3o do militar (ex: 3\u00ba de 10 na fila)\n\n    %% Atualiza\u00e7\u00e3o do Status %%\n    Gestor-&gt;&gt;Sistema: Edita um RPT e muda o status para \"Mov. servi\u00e7o\"\n    Sistema-&gt;&gt;BD (RPT): Atualiza o `Cadastro_rpt` e cria um registro em `HistoricoRpt`\n    BD (RPT)--&gt;&gt;Sistema: Confirma atualiza\u00e7\u00e3o\n    Sistema-&gt;&gt;Gestor: Mostra RPT atualizado\n</code></pre>"},{"location":"apps/rpt/#a-logica-da-fila-de-espera","title":"A L\u00f3gica da Fila de Espera","text":"<p>A view <code>ver_rpt</code> \u00e9 o cora\u00e7\u00e3o desta funcionalidade. Ao visualizar uma solicita\u00e7\u00e3o, o sistema utiliza uma <code>Window Function</code> (<code>RowNumber</code>) do ORM do Django para calcular dinamicamente: 1.  A posi\u00e7\u00e3o exata do militar na fila para a se\u00e7\u00e3o de destino. 2.  O n\u00famero total de militares na mesma fila.</p> <p>A ordena\u00e7\u00e3o da fila \u00e9 baseada na <code>data_pedido</code> (data da solicita\u00e7\u00e3o), garantindo um crit\u00e9rio justo e transparente.</p>"},{"location":"apps/rpt/#funcionalidades-adicionais","title":"Funcionalidades Adicionais","text":"<ul> <li>Importa\u00e7\u00e3o e Exporta\u00e7\u00e3o: O app permite a importa\u00e7\u00e3o (<code>importar_rpt</code>) e exporta\u00e7\u00e3o (<code>exportar_rpt</code>) de dados em massa usando arquivos CSV ou Excel, facilitando a administra\u00e7\u00e3o e a an\u00e1lise externa dos dados.</li> <li>Busca Integrada: Ferramentas de busca (<code>buscar_militar_rpt</code>) permitem que os gestores encontrem rapidamente o militar para o qual desejam abrir uma solicita\u00e7\u00e3o.</li> </ul>"},{"location":"apps/rpt/#endpoints-urls-principais","title":"Endpoints (URLs) Principais","text":"URL View Nome da URL Descri\u00e7\u00e3o <code>/cadastrar_rpt/</code> <code>cadastrar_rpt</code> <code>cadastrar_rpt</code> Exibe o formul\u00e1rio para criar uma nova solicita\u00e7\u00e3o de transfer\u00eancia. <code>/listar_rpt/</code> <code>listar_rpt</code> <code>listar_rpt</code> Lista todas as solicita\u00e7\u00f5es de transfer\u00eancia ativas. <code>/ver_rpt/&lt;int:id&gt;/</code> <code>ver_rpt</code> <code>ver_rpt</code> Exibe os detalhes de uma solicita\u00e7\u00e3o, incluindo a posi\u00e7\u00e3o na fila. <code>/editar_rpt/&lt;int:id&gt;/</code> <code>editar_rpt</code> <code>editar_rpt</code> Permite a edi\u00e7\u00e3o do status e dos dados de uma solicita\u00e7\u00e3o. <code>/historico_rpt/&lt;int:id&gt;/</code> <code>historico_rpt</code> <code>historico_rpt</code> Mostra o hist\u00f3rico completo de altera\u00e7\u00f5es de uma solicita\u00e7\u00e3o. <code>/importar_rpt/</code> <code>importar_rpt</code> <code>importar_rpt</code> P\u00e1gina para upload de arquivos para importa\u00e7\u00e3o em massa. <code>/exportar_rpt/</code> <code>exportar_rpt</code> <code>exportar_rpt</code> Endpoint para baixar os dados de RPT em formato Excel ou CSV."},{"location":"configuracao/settings_base/","title":"Configura\u00e7\u00f5es Base (<code>base.py</code>)","text":"<p>O arquivo <code>backend/settings/base.py</code> \u00e9 o pilar da configura\u00e7\u00e3o do Django no SisCoE. Ele cont\u00e9m todas as configura\u00e7\u00f5es que s\u00e3o comuns a todos os ambientes (desenvolvimento e produ\u00e7\u00e3o).</p> <p>Os arquivos <code>dev.py</code> e <code>prod.py</code> importam todas as configura\u00e7\u00f5es de <code>base.py</code> (<code>from .base import *</code>) e, em seguida, sobrescrevem ou adicionam apenas o que for espec\u00edfico para cada ambiente.</p>"},{"location":"configuracao/settings_base/#variaveis-de-ambiente","title":"Vari\u00e1veis de Ambiente","text":"<p>Este arquivo utiliza a biblioteca <code>python-decouple</code> para carregar configura\u00e7\u00f5es sens\u00edveis ou que variam entre ambientes. As seguintes vari\u00e1veis s\u00e3o lidas do arquivo <code>.env</code> ou do ambiente do sistema:</p> <p>Arquivo <code>.env_example</code></p> <p>O arquivo <code>.env_example</code> na raiz do projeto serve como um template para todas as vari\u00e1veis de ambiente necess\u00e1rias.</p> <ul> <li><code>SECRET_KEY</code>: A chave secreta do Django, essencial para a seguran\u00e7a criptogr\u00e1fica do projeto.</li> <li><code>DEFAULT_FROM_EMAIL</code>: O endere\u00e7o de e-mail padr\u00e3o usado para enviar e-mails do sistema.</li> <li><code>GROQ_API_KEY</code>: Chave de API para o servi\u00e7o Groq (provavelmente usado para alguma funcionalidade de IA).</li> <li><code>WEATHER_API_KEY</code>: Chave de API para um servi\u00e7o de previs\u00e3o do tempo.</li> </ul> <p>Aten\u00e7\u00e3o</p> <p>Nunca coloque informa\u00e7\u00f5es sens\u00edveis (como senhas ou chaves de API) diretamente neste arquivo. Use sempre o <code>decouple</code> para carreg\u00e1-las a partir de vari\u00e1veis de ambiente.</p>"},{"location":"configuracao/settings_base/#configuracoes-principais","title":"Configura\u00e7\u00f5es Principais","text":""},{"location":"configuracao/settings_base/#installed_apps","title":"<code>INSTALLED_APPS</code>","text":"<p>Lista todas as aplica\u00e7\u00f5es que comp\u00f5em o projeto, incluindo as apps do pr\u00f3prio Django, apps de terceiros e as apps internas do SisCoE.</p> <pre><code>INSTALLED_APPS = [\n    # Django Apps\n    'django.contrib.admin',\n    # ...\n\n    # Apps de Terceiros\n    'import_export',      # Para importa\u00e7\u00e3o/exporta\u00e7\u00e3o de dados no admin\n    'widget_tweaks',      # Facilita a renderiza\u00e7\u00e3o de formul\u00e1rios\n    'compressor',         # Comprime arquivos est\u00e1ticos (CSS, JS)\n    # ...\n\n    # Apps do SisCoE\n    'backend.core',\n    'backend.accounts',\n    # ...\n]\n</code></pre>"},{"location":"configuracao/settings_base/#middleware","title":"<code>MIDDLEWARE</code>","text":"<p>Define os middlewares que processam as requisi\u00e7\u00f5es e respostas globalmente. Al\u00e9m dos middlewares padr\u00e3o do Django, o SisCoE inclui alguns customizados:</p> <ul> <li><code>whitenoise.middleware.WhiteNoiseMiddleware</code>: Para servir arquivos est\u00e1ticos de forma eficiente em produ\u00e7\u00e3o.</li> <li><code>backend.accounts.middleware.UserActionLoggingMiddleware</code>: Registra a\u00e7\u00f5es importantes do usu\u00e1rio.</li> <li><code>backend.core.middleware.JSONMessagesMiddleware</code>: Permite que mensagens do Django sejam enviadas em respostas JSON (\u00fatil para AJAX/HTMX).</li> <li><code>backend.accounts.middleware.ForcePasswordChangeMiddleware</code>: For\u00e7a o usu\u00e1rio a trocar a senha se a flag <code>must_change_password</code> estiver ativa.</li> <li><code>backend.accounts.middleware.UpdateLastActivityMiddleware</code>: Atualiza a informa\u00e7\u00e3o de \"visto por \u00faltimo\" do usu\u00e1rio.</li> </ul>"},{"location":"configuracao/settings_base/#auth_user_model","title":"<code>AUTH_USER_MODEL</code>","text":"<p>Define o modelo customizado de usu\u00e1rio (<code>accounts.User</code>) para autentica\u00e7\u00e3o, permitindo a adi\u00e7\u00e3o de campos como <code>permissoes</code> e <code>cadastro</code>.</p> <pre><code>AUTH_USER_MODEL = 'accounts.User'\n</code></pre>"},{"location":"configuracao/settings_base/#arquivos-estaticos-e-midias","title":"Arquivos Est\u00e1ticos e M\u00eddias","text":"<ul> <li><code>STATIC_URL</code>: <code>/static/</code> - URL base para servir arquivos est\u00e1ticos.</li> <li><code>STATIC_ROOT</code>: <code>BASE_DIR / 'staticfiles'</code> - Diret\u00f3rio onde o comando <code>collectstatic</code> reunir\u00e1 todos os arquivos est\u00e1ticos para produ\u00e7\u00e3o.</li> <li><code>STATICFILES_STORAGE</code>: <code>whitenoise.storage.CompressedManifestStaticFilesStorage</code> - Configura o <code>Whitenoise</code> para gerenciar o armazenamento e versionamento dos arquivos est\u00e1ticos, otimizando o cache no navegador.</li> <li><code>MEDIA_URL</code> e <code>MEDIA_ROOT</code>: Configura\u00e7\u00f5es para o armazenamento de arquivos enviados pelos usu\u00e1rios (fotos de perfil, documentos, etc.).</li> </ul>"},{"location":"configuracao/settings_base/#logging","title":"Logging","text":"<p>A configura\u00e7\u00e3o de <code>LOGGING</code> \u00e9 definida para registrar informa\u00e7\u00f5es \u00fateis para depura\u00e7\u00e3o e monitoramento: -   Handlers: <code>console</code> (para exibir logs no terminal) e <code>file</code> (para salvar logs em <code>debug.log</code>). -   Rota\u00e7\u00e3o de Arquivos: O arquivo <code>debug.log</code> \u00e9 rotativo, com um tamanho m\u00e1ximo de 5MB e mantendo at\u00e9 5 arquivos de backup.</p>"},{"location":"configuracao/settings_dev/","title":"Configura\u00e7\u00f5es de Desenvolvimento (<code>dev.py</code>)","text":"<p>O arquivo <code>backend/settings/dev.py</code> cont\u00e9m as configura\u00e7\u00f5es espec\u00edficas para o ambiente de desenvolvimento local. Ele herda todas as configura\u00e7\u00f5es de <code>base.py</code> (<code>from .base import *</code>) e as ajusta para facilitar a depura\u00e7\u00e3o e o desenvolvimento \u00e1gil.</p> <p>Como Ativar</p> <p>Para usar estas configura\u00e7\u00f5es, a vari\u00e1vel de ambiente <code>DJANGO_SETTINGS_MODULE</code> deve ser definida como <code>backend.settings.dev</code>.</p>"},{"location":"configuracao/settings_dev/#configuracoes-especificas","title":"Configura\u00e7\u00f5es Espec\u00edficas","text":""},{"location":"configuracao/settings_dev/#debug","title":"<code>DEBUG</code>","text":"<p>Definido como <code>True</code> para ativar o modo de debug do Django. Isso habilita p\u00e1ginas de erro detalhadas e o recarregamento autom\u00e1tico do servidor quando h\u00e1 altera\u00e7\u00f5es no c\u00f3digo.</p> <pre><code>DEBUG = True\n</code></pre> <p>Seguran\u00e7a</p> <p>O modo <code>DEBUG</code> nunca deve ser ativado em um ambiente de produ\u00e7\u00e3o, pois ele exp\u00f5e informa\u00e7\u00f5es sens\u00edveis sobre a aplica\u00e7\u00e3o.</p>"},{"location":"configuracao/settings_dev/#allowed_hosts","title":"<code>ALLOWED_HOSTS</code>","text":"<p>Permite que o servidor de desenvolvimento seja acessado localmente atrav\u00e9s de <code>localhost</code> e <code>127.0.0.1</code>.</p> <pre><code>ALLOWED_HOSTS = ['localhost', '127.0.0.1']\n</code></pre>"},{"location":"configuracao/settings_dev/#databases","title":"<code>DATABASES</code>","text":"<p>Sobrescreve a configura\u00e7\u00e3o do banco de dados para usar o SQLite3. Este banco de dados \u00e9 baseado em um \u00fanico arquivo (<code>db.sqlite3</code>) e n\u00e3o requer um servidor separado, o que o torna ideal para o desenvolvimento local.</p> <pre><code>DATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.sqlite3',\n        'NAME': BASE_DIR / 'db.sqlite3',\n    }\n}\n</code></pre>"},{"location":"configuracao/settings_dev/#email_backend","title":"<code>EMAIL_BACKEND</code>","text":"<p>Configura o backend de e-mail para <code>console.EmailBackend</code>. Com isso, qualquer e-mail enviado pela aplica\u00e7\u00e3o (ex: redefini\u00e7\u00e3o de senha) n\u00e3o ser\u00e1 de fato enviado, mas sim impresso no console onde o servidor est\u00e1 rodando.</p> <pre><code>EMAIL_BACKEND = 'django.core.mail.backends.console.EmailBackend'\n</code></pre>"},{"location":"configuracao/settings_dev/#caches","title":"<code>CACHES</code>","text":"<p>Para o ambiente de desenvolvimento, um cache em mem\u00f3ria (<code>LocMemCache</code>) \u00e9 utilizado. \u00c9 r\u00e1pido, eficiente para testes e n\u00e3o possui depend\u00eancias externas.</p> <pre><code>CACHES = {\n    'default': {\n        'BACKEND': 'django.core.cache.backends.locmem.LocMemCache',\n    }\n}\n</code></pre>"},{"location":"configuracao/settings_dev/#seguranca-relaxada","title":"Seguran\u00e7a Relaxada","text":"<p>As diretivas de seguran\u00e7a de cookies s\u00e3o desativadas para permitir o funcionamento do site em HTTP local, sem a necessidade de configurar HTTPS no ambiente de desenvolvimento.</p> <pre><code>CSRF_COOKIE_SECURE = False\nSESSION_COOKIE_SECURE = False\n</code></pre>"},{"location":"configuracao/settings_prod/","title":"Configura\u00e7\u00f5es de Produ\u00e7\u00e3o (<code>prod.py</code>)","text":"<p>O arquivo <code>backend/settings/prod.py</code> \u00e9 onde as configura\u00e7\u00f5es s\u00e3o ajustadas para o ambiente de produ\u00e7\u00e3o. A seguran\u00e7a, o desempenho e a robustez s\u00e3o as principais prioridades aqui.</p> <p>Ambiente de Produ\u00e7\u00e3o</p> <p>Este arquivo deve ser usado apenas em um servidor de produ\u00e7\u00e3o. Para ativ\u00e1-lo, a vari\u00e1vel de ambiente <code>DJANGO_SETTINGS_MODULE</code> deve apontar para <code>backend.settings.prod</code>.</p>"},{"location":"configuracao/settings_prod/#configuracoes-especificas","title":"Configura\u00e7\u00f5es Espec\u00edficas","text":""},{"location":"configuracao/settings_prod/#debug","title":"<code>DEBUG</code>","text":"<p>\u00c9 fundamental que o <code>DEBUG</code> seja <code>False</code> em produ\u00e7\u00e3o para evitar a exposi\u00e7\u00e3o de informa\u00e7\u00f5es sens\u00edveis sobre a configura\u00e7\u00e3o do projeto.</p> <pre><code>DEBUG = False\n</code></pre>"},{"location":"configuracao/settings_prod/#allowed_hosts","title":"<code>ALLOWED_HOSTS</code>","text":"<p>Esta configura\u00e7\u00e3o \u00e9 carregada da vari\u00e1vel de ambiente <code>ALLOWED_HOSTS</code> e deve conter o(s) dom\u00ednio(s) exato(s) onde a aplica\u00e7\u00e3o est\u00e1 hospedada.</p> <pre><code># Exemplo no .env: ALLOWED_HOSTS=meusite.com.br,www.meusite.com.br\nALLOWED_HOSTS = config('ALLOWED_HOSTS', cast=Csv())\n</code></pre>"},{"location":"configuracao/settings_prod/#databases","title":"<code>DATABASES</code>","text":"<p>Em produ\u00e7\u00e3o, o SisCoE \u00e9 configurado para usar PostgreSQL, um banco de dados relacional robusto e confi\u00e1vel. As credenciais de conex\u00e3o (<code>DB_NAME</code>, <code>DB_USER</code>, etc.) s\u00e3o carregadas de forma segura a partir de vari\u00e1veis de ambiente.</p> <pre><code>DATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.postgresql',\n        'NAME': config('DB_NAME'),\n        # ...\n    }\n}\n</code></pre>"},{"location":"configuracao/settings_prod/#caches-com-redis","title":"<code>CACHES</code> com Redis","text":"<p>Para otimizar o desempenho, a produ\u00e7\u00e3o utiliza o Redis como um backend de cache de alto desempenho. Ele \u00e9 usado para armazenar dados frequentemente acessados e tamb\u00e9m para gerenciar as sess\u00f5es dos usu\u00e1rios, reduzindo a carga sobre o banco de dados.</p> <pre><code>CACHES = {\n    'default': {\n        'BACKEND': 'django_redis.cache.RedisCache',\n        'LOCATION': config('REDIS_URL', default='redis://127.0.0.1:6379/1'),\n        # ...\n    }\n}\nSESSION_ENGINE = \"django.contrib.sessions.backends.cache\"\n</code></pre>"},{"location":"configuracao/settings_prod/#email_backend","title":"<code>EMAIL_BACKEND</code>","text":"<p>Para o envio de e-mails reais em produ\u00e7\u00e3o, o sistema \u00e9 configurado para usar um servidor SMTP, neste caso, o da Brevo. As credenciais s\u00e3o carregadas de vari\u00e1veis de ambiente.</p> <pre><code>EMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend'\nEMAIL_HOST = 'smtp-relay.brevo.com'\n# ...\nEMAIL_HOST_USER = config('BREVO_SMTP_USER')\nEMAIL_HOST_PASSWORD = config('BREVO_SMTP_PASSWORD')\n</code></pre>"},{"location":"configuracao/settings_prod/#diretivas-de-seguranca","title":"Diretivas de Seguran\u00e7a","text":"<p>Um conjunto de middlewares e configura\u00e7\u00f5es de seguran\u00e7a \u00e9 ativado em produ\u00e7\u00e3o para proteger a aplica\u00e7\u00e3o contra ataques comuns:</p> <ul> <li><code>SECURE_SSL_REDIRECT</code>: Redireciona todo o tr\u00e1fego HTTP para HTTPS.</li> <li><code>SESSION_COOKIE_SECURE</code> e <code>CSRF_COOKIE_SECURE</code>: Garantem que os cookies s\u00f3 sejam enviados atrav\u00e9s de conex\u00f5es seguras (HTTPS).</li> <li><code>SECURE_HSTS_SECONDS</code>: Ativa o HSTS (HTTP Strict Transport Security) para for\u00e7ar o navegador a usar apenas conex\u00f5es seguras por um longo per\u00edodo.</li> <li><code>SECURE_BROWSER_XSS_FILTER</code> e <code>SECURE_CONTENT_TYPE_NOSNIFF</code>: Adicionam camadas extras de prote\u00e7\u00e3o no navegador contra ataques de XSS e sniffing de tipo de conte\u00fado.</li> </ul>"},{"location":"core/","title":"Introdu\u00e7\u00e3o ao Aplicativo Core","text":"<p>O aplicativo <code>core</code> \u00e9 respons\u00e1vel por gerenciar os perfis dos usu\u00e1rios e fornecer funcionalidades b\u00e1sicas como dashboard e p\u00e1ginas de capa.</p>"},{"location":"core/#funcionalidades-principais","title":"Funcionalidades Principais","text":"<ul> <li>Gerenciamento de perfis de usu\u00e1rios.</li> <li>Dashboard personalizado.</li> <li>P\u00e1ginas de capa e landing.</li> </ul>"},{"location":"core/models/","title":"Modelos do Aplicativo Core","text":""},{"location":"core/models/#profile","title":"<code>Profile</code>","text":"<p>O modelo <code>Profile</code> estende o modelo <code>User</code> do Django, adicionando informa\u00e7\u00f5es adicionais como posto/gradua\u00e7\u00e3o, CPF, tipo (administrativo/operacional) e imagem de perfil.</p> <p>```python from backend.accounts.models import User from django.db import models from backend.efetivo.models import Cadastro</p> <p>class Profile(models.Model):     # ... campos do modelo ...</p> <pre><code>def __str__(self):\n    return self.full_name\n\n@property\ndef grad(self):\n    # ... l\u00f3gica para exibir posto/gradua\u00e7\u00e3o com formata\u00e7\u00e3o HTML ...\n    pass\n</code></pre>"},{"location":"desenvolvimento/arquitetura/","title":"Arquitetura do Backend","text":"<p>O backend do SisCoE \u00e9 constru\u00eddo sobre o framework Django, seguindo uma arquitetura de Monolito Modular. Esta abordagem combina a simplicidade de desenvolvimento de um projeto monol\u00edtico com a organiza\u00e7\u00e3o e o baixo acoplamento de um sistema modular.</p> <p>Princ\u00edpio do Monolito Modular</p> <p>A aplica\u00e7\u00e3o \u00e9 desenvolvida e implantada como uma \u00fanica unidade (monolito), mas seu c\u00f3digo \u00e9 organizado em aplicativos (apps) Django independentes. Cada app encapsula uma funcionalidade de neg\u00f3cio espec\u00edfica (ex: <code>accounts</code>, <code>efetivo</code>, <code>cursos</code>), promovendo a reutiliza\u00e7\u00e3o de c\u00f3digo e a manutenibilidade.</p>"},{"location":"desenvolvimento/arquitetura/#padrao-mvt-model-view-template","title":"Padr\u00e3o MVT (Model-View-Template)","text":"<p>O Django implementa uma varia\u00e7\u00e3o do padr\u00e3o MVC (Model-View-Controller), conhecido como MVT (Model-View-Template). A l\u00f3gica \u00e9 organizada da seguinte forma:</p> <pre><code>graph TD\n    A[Usu\u00e1rio] --&gt; B{Roteador de URL (urls.py)};\n    B --&gt; C{View (views.py)};\n    C --&gt; D[Model (models.py)];\n    D --&gt; E[Banco de Dados];\n    C --&gt; F[Template (templates/*.html)];\n    F --&gt; G[Conte\u00fado Renderizado (HTML)];\n    G --&gt; A;\n\n    subgraph \"L\u00f3gica de Neg\u00f3cio\"\n        C\n    end\n\n    subgraph \"Camada de Dados\"\n        D\n        E\n    end\n\n    subgraph \"Camada de Apresenta\u00e7\u00e3o\"\n        F\n        G\n    end\n</code></pre> <ul> <li> <p>Model (<code>models.py</code>): Representa a estrutura dos dados, definindo os campos e comportamentos do banco de dados. Os models do SisCoE est\u00e3o localizados em <code>backend/&lt;app&gt;/models.py</code>.</p> </li> <li> <p>View (<code>views.py</code>): \u00c9 a l\u00f3gica de neg\u00f3cio que processa as requisi\u00e7\u00f5es do usu\u00e1rio, interage com os models e renderiza os templates. As views est\u00e3o em <code>backend/&lt;app&gt;/views.py</code>.</p> </li> <li> <p>Template (<code>templates/</code>): \u00c9 a camada de apresenta\u00e7\u00e3o, respons\u00e1vel por renderizar o HTML que o usu\u00e1rio v\u00ea. Os templates est\u00e3o em <code>backend/&lt;app&gt;/templates/</code>.</p> </li> <li> <p>URL Dispatcher (<code>urls.py</code>): Mapeia as URLs requisitadas pelo navegador para as <code>Views</code> correspondentes.</p> </li> </ul> <p>Exemplo de Fluxo de Requisi\u00e7\u00e3o</p> <ol> <li>O navegador de um usu\u00e1rio faz uma requisi\u00e7\u00e3o para <code>/efetivo/1/</code>.</li> <li>O URL Dispatcher principal do Django (<code>backend/urls.py</code>) identifica que o padr\u00e3o <code>efetivo/</code> pertence ao app <code>efetivo</code> e repassa a requisi\u00e7\u00e3o para o <code>urls.py</code> desse app.</li> <li>O <code>urls.py</code> do app <code>efetivo</code> mapeia o restante do caminho (<code>1/</code>) para a view <code>detalhe_efetivo</code>.</li> <li>A View <code>detalhe_efetivo</code> \u00e9 executada. Ela utiliza o Model <code>Efetivo</code> para buscar no banco de dados o registro com <code>id=1</code>.</li> <li>A view, de posse do objeto <code>efetivo</code>, renderiza o Template <code>detalhe_efetivo.html</code>, passando o objeto como contexto.</li> <li>O template \u00e9 processado, inserindo os dados do efetivo no HTML.</li> <li>O HTML final \u00e9 retornado como resposta ao navegador do usu\u00e1rio.</li> </ol>"},{"location":"desenvolvimento/arquitetura/#frontend-e-arquivos-estaticos","title":"Frontend e Arquivos Est\u00e1ticos","text":"<p>O frontend n\u00e3o \u00e9 desacoplado (n\u00e3o \u00e9 uma SPA). Ele \u00e9 renderizado diretamente pelo Django, utilizando uma combina\u00e7\u00e3o de:</p> <ul> <li>Tailwind CSS: Para estiliza\u00e7\u00e3o r\u00e1pida e moderna.</li> <li>Flowbite &amp; FullCalendar.js: Para componentes de UI interativos, como modais, datepickers e calend\u00e1rios.</li> <li>JavaScript: Para interatividade no lado do cliente.</li> </ul> <p>Gerenciamento de Est\u00e1ticos</p> <p>Os arquivos est\u00e1ticos (<code>.css</code>, <code>.js</code>, <code>.img</code>) s\u00e3o gerenciados pelo <code>whitenoise</code> em produ\u00e7\u00e3o para garantir alta performance e cacheamento eficiente.</p>"},{"location":"desenvolvimento/arquitetura/#banco-de-dados-e-configuracoes","title":"Banco de Dados e Configura\u00e7\u00f5es","text":""},{"location":"desenvolvimento/arquitetura/#banco-de-dados","title":"\ud83d\uddc4\ufe0f Banco de Dados","text":"<p>O sistema \u00e9 configurado para usar dois bancos de dados, dependendo do ambiente:</p> <ul> <li>Desenvolvimento: SQLite3, para simplicidade e rapidez na configura\u00e7\u00e3o local.</li> <li>Produ\u00e7\u00e3o: PostgreSQL, para robustez, escalabilidade e seguran\u00e7a dos dados.</li> </ul>"},{"location":"desenvolvimento/arquitetura/#configuracoes-settings","title":"\u2699\ufe0f Configura\u00e7\u00f5es (Settings)","text":"<p>A configura\u00e7\u00e3o do Django \u00e9 modularizada na pasta <code>backend/settings/</code> para separar as preocupa\u00e7\u00f5es de cada ambiente:</p> <ul> <li><code>base.py</code>: Cont\u00e9m todas as configura\u00e7\u00f5es comuns a ambos os ambientes.</li> <li><code>dev.py</code>: Configura\u00e7\u00f5es espec\u00edficas para o ambiente de desenvolvimento (ex: <code>DEBUG=True</code>, banco de dados SQLite).</li> <li><code>prod.py</code>: Configura\u00e7\u00f5es para o ambiente de produ\u00e7\u00e3o (ex: <code>DEBUG=False</code>, configura\u00e7\u00f5es de seguran\u00e7a).</li> </ul> <p>As vari\u00e1veis de ambiente s\u00e3o gerenciadas pela biblioteca <code>python-decouple</code>, que as l\u00ea a partir de um arquivo <code>.env</code>, garantindo que segredos e configura\u00e7\u00f5es sens\u00edveis n\u00e3o sejam expostos no c\u00f3digo-fonte.</p>"},{"location":"desenvolvimento/estrutura_pastas/","title":"Estrutura de Pastas do Projeto","text":"<p>A organiza\u00e7\u00e3o do c\u00f3digo-fonte do SisCoE segue as conven\u00e7\u00f5es do Django, com uma estrutura clara que separa as responsabilidades e facilita a navega\u00e7\u00e3o e manuten\u00e7\u00e3o.</p>"},{"location":"desenvolvimento/estrutura_pastas/#estrutura-geral-da-raiz","title":"Estrutura Geral da Raiz","text":"<pre><code>/home/andre/Repositorio/SisCoE/\n\u251c\u2500\u2500 backend/            # Cont\u00e9m todo o c\u00f3digo-fonte do Django.\n\u251c\u2500\u2500 contrib/            # Scripts de utilidade para o projeto.\n\u251c\u2500\u2500 docker/             # Arquivos de configura\u00e7\u00e3o do Docker.\n\u251c\u2500\u2500 docs/               # Arquivos da documenta\u00e7\u00e3o (MkDocs).\n\u251c\u2500\u2500 import/             # Scripts e arquivos para importa\u00e7\u00e3o de dados.\n\u251c\u2500\u2500 node_modules/       # Depend\u00eancias do frontend (gerado pelo npm).\n\u251c\u2500\u2500 static/             # Arquivos est\u00e1ticos coletados pelo Django para produ\u00e7\u00e3o.\n\u251c\u2500\u2500 venv/               # Ambiente virtual do Python.\n\u251c\u2500\u2500 .env_example        # Exemplo de arquivo de vari\u00e1veis de ambiente.\n\u251c\u2500\u2500 docker-compose.yml  # Orquestra\u00e7\u00e3o dos cont\u00eaineres Docker.\n\u251c\u2500\u2500 Dockerfile          # Defini\u00e7\u00e3o do cont\u00eainer da aplica\u00e7\u00e3o.\n\u251c\u2500\u2500 manage.py           # Utilit\u00e1rio de linha de comando do Django.\n\u251c\u2500\u2500 mkdocs.yml          # Arquivo de configura\u00e7\u00e3o do MkDocs.\n\u251c\u2500\u2500 package.json        # Depend\u00eancias e scripts do Node.js.\n\u251c\u2500\u2500 requirements.txt    # Depend\u00eancias do Python.\n\u2514\u2500\u2500 tailwind.config.js  # Configura\u00e7\u00e3o do Tailwind CSS.\n</code></pre>"},{"location":"desenvolvimento/estrutura_pastas/#diretorio-backend","title":"Diret\u00f3rio <code>backend/</code>","text":"<p>Este \u00e9 o cora\u00e7\u00e3o do projeto, onde toda a l\u00f3gica da aplica\u00e7\u00e3o Django reside.</p> <pre><code>backend/\n\u251c\u2500\u2500 backend/            # Diret\u00f3rio principal do projeto Django.\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 asgi.py         # Configura\u00e7\u00e3o para servidores ASGI.\n\u2502   \u251c\u2500\u2500 settings/       # M\u00f3dulo de configura\u00e7\u00f5es (base.py, dev.py, prod.py).\n\u2502   \u251c\u2500\u2500 urls.py         # Roteador de URLs principal.\n\u2502   \u2514\u2500\u2500 wsgi.py         # Configura\u00e7\u00e3o para servidores WSGI.\n\u2502\n\u251c\u2500\u2500 accounts/           # App Django: Gest\u00e3o de usu\u00e1rios, autentica\u00e7\u00e3o e perfis.\n\u251c\u2500\u2500 adicional/          # App Django: Funcionalidades adicionais.\n\u251c\u2500\u2500 agenda/             # App Django: Gerenciamento de agendas e eventos.\n\u251c\u2500\u2500 bm/                 # App Django: Gest\u00e3o de Batalh\u00f5es.\n\u251c\u2500\u2500 calculadora/        # App Django: Ferramentas de c\u00e1lculo.\n\u251c\u2500\u2500 core/               # App Django: Funcionalidades centrais e compartilhadas.\n\u251c\u2500\u2500 crm/                # App Django: M\u00f3dulo de CRM.\n\u251c\u2500\u2500 cursos/             # App Django: Gest\u00e3o de cursos e matr\u00edculas.\n\u251c\u2500\u2500 documentos/         # App Django: Gerenciamento de documentos.\n\u251c\u2500\u2500 efetivo/            # App Django: Controle do efetivo de pessoal.\n\u251c\u2500\u2500 lp/                 # App Django: Log\u00edstica.\n\u251c\u2500\u2500 municipios/         # App Django: Gest\u00e3o de munic\u00edpios.\n\u2514\u2500\u2500 rpt/                # App Django: Gera\u00e7\u00e3o de relat\u00f3rios.\n</code></pre>"},{"location":"desenvolvimento/estrutura_pastas/#estrutura-de-um-app-django-tipico-backendapp","title":"Estrutura de um App Django T\u00edpico (<code>backend/&lt;app&gt;/</code>)","text":"<p>Cada aplicativo dentro do <code>backend/</code> segue uma estrutura padronizada que organiza suas responsabilidades:</p> <pre><code>&lt;app_name&gt;/\n\u251c\u2500\u2500 __init__.py\n\u251c\u2500\u2500 admin.py          # Registro dos models na interface de admin do Django.\n\u251c\u2500\u2500 apps.py           # Configura\u00e7\u00e3o do aplicativo.\n\u251c\u2500\u2500 forms.py          # Defini\u00e7\u00e3o de formul\u00e1rios.\n\u251c\u2500\u2500 models.py         # Defini\u00e7\u00e3o dos modelos de dados (tabelas do banco).\n\u251c\u2500\u2500 signals.py        # Defini\u00e7\u00e3o de sinais para eventos.\n\u251c\u2500\u2500 tests.py          # Testes unit\u00e1rios e de integra\u00e7\u00e3o para o app.\n\u251c\u2500\u2500 urls.py           # Rotas de URL espec\u00edficas do app.\n\u251c\u2500\u2500 views.py          # L\u00f3gica de neg\u00f3cio (controllers).\n\u251c\u2500\u2500 migrations/       # Arquivos de migra\u00e7\u00e3o do banco de dados (gerados).\n\u251c\u2500\u2500 static/           # Arquivos est\u00e1ticos espec\u00edficos do app (CSS, JS, imagens).\n\u2514\u2500\u2500 templates/        # Templates HTML espec\u00edficos do app.\n</code></pre> <p>Boas Pr\u00e1ticas de Design de Apps</p> <ul> <li>Baixo Acoplamento: Cada app deve ser o mais independente poss\u00edvel, evitando depend\u00eancias circulares.</li> <li>Alta Coes\u00e3o: A l\u00f3gica dentro de um app deve ser focada em uma \u00fanica e bem definida responsabilidade de neg\u00f3cio.</li> </ul>"},{"location":"desenvolvimento/estrutura_pastas/#outros-diretorios-e-arquivos-importantes","title":"Outros Diret\u00f3rios e Arquivos Importantes","text":"<ul> <li><code>docs/</code>: Cont\u00e9m todos os arquivos Markdown que geram esta documenta\u00e7\u00e3o.</li> <li><code>static/</code> (na raiz): Este diret\u00f3rio n\u00e3o \u00e9 para ser usado diretamente. Ele \u00e9 o destino do comando <code>python manage.py collectstatic</code>, que re\u00fane todos os arquivos est\u00e1ticos de todos os apps em um \u00fanico lugar para serem servidos em produ\u00e7\u00e3o.</li> <li><code>venv/</code>: O ambiente virtual que isola as depend\u00eancias Python do projeto. N\u00e3o \u00e9 versionado (est\u00e1 no <code>.gitignore</code>).</li> <li>Arquivos de Configura\u00e7\u00e3o: <code>requirements.txt</code> (Python) e <code>package.json</code> (Node.js) definem as depend\u00eancias do projeto. O arquivo <code>.env</code> (criado a partir do <code>.env_example</code>) guarda as vari\u00e1veis de ambiente e segredos, mantendo-os fora do controle de vers\u00e3o.</li> </ul>"},{"location":"desenvolvimento/executando_o_projeto/","title":"Executando o Projeto","text":"<p>Este guia fornece as instru\u00e7\u00f5es para configurar e executar o projeto SisCoE em um ambiente de desenvolvimento local, bem como para visualizar e publicar a documenta\u00e7\u00e3o.</p>"},{"location":"desenvolvimento/executando_o_projeto/#pre-requisitos","title":"Pr\u00e9-requisitos","text":"<p>Antes de come\u00e7ar, garanta que voc\u00ea tenha os seguintes softwares instalados em sua m\u00e1quina: -   Python (vers\u00e3o 3.10 ou superior) -   Node.js e npm (para as depend\u00eancias de frontend e Tailwind CSS) -   Git (para controle de vers\u00e3o) -   Docker e Docker Compose (opcional, para executar o ambiente de produ\u00e7\u00e3o)</p>"},{"location":"desenvolvimento/executando_o_projeto/#1-configuracao-do-ambiente-local","title":"1. Configura\u00e7\u00e3o do Ambiente Local","text":""},{"location":"desenvolvimento/executando_o_projeto/#clone-o-repositorio","title":"Clone o Reposit\u00f3rio","text":"<p>Primeiro, clone o reposit\u00f3rio do projeto para a sua m\u00e1quina local: <pre><code>git clone https://github.com/Andre-fdias/SisCoE.git\ncd SisCoE\n</code></pre></p>"},{"location":"desenvolvimento/executando_o_projeto/#crie-e-ative-um-ambiente-virtual","title":"Crie e Ative um Ambiente Virtual","text":"<p>\u00c9 uma boa pr\u00e1tica usar um ambiente virtual para isolar as depend\u00eancias do projeto. <pre><code># Criar o ambiente virtual\npython -m venv venv\n\n# Ativar no Linux/macOS\nsource venv/bin/activate\n\n# Ativar no Windows\n.\\venv\\Scripts\\activate\n</code></pre></p>"},{"location":"desenvolvimento/executando_o_projeto/#instale-as-dependencias","title":"Instale as Depend\u00eancias","text":"<p>O projeto possui depend\u00eancias Python e Node.js.</p> <ol> <li> <p>Depend\u00eancias Python: <pre><code>pip install -r requirements.txt\n</code></pre></p> </li> <li> <p>Depend\u00eancias Node.js: <pre><code>npm install\n</code></pre></p> </li> </ol>"},{"location":"desenvolvimento/executando_o_projeto/#configure-as-variaveis-de-ambiente","title":"Configure as Vari\u00e1veis de Ambiente","text":"<ol> <li>Copie o arquivo de exemplo <code>.env_example</code> para um novo arquivo chamado <code>.env</code>:     <pre><code>cp .env_example .env\n</code></pre></li> <li>Abra o arquivo <code>.env</code> em um editor de texto e preencha as vari\u00e1veis necess\u00e1rias, como a <code>SECRET_KEY</code>. Para desenvolvimento, uma chave simples gerada aleatoriamente \u00e9 suficiente.</li> </ol>"},{"location":"desenvolvimento/executando_o_projeto/#2-executando-a-aplicacao-desenvolvimento","title":"2. Executando a Aplica\u00e7\u00e3o (Desenvolvimento)","text":""},{"location":"desenvolvimento/executando_o_projeto/#aplique-as-migracoes-do-banco-de-dados","title":"Aplique as Migra\u00e7\u00f5es do Banco de Dados","text":"<p>Este comando cria o arquivo de banco de dados SQLite e aplica o schema necess\u00e1rio. <pre><code>python manage.py migrate\n</code></pre></p>"},{"location":"desenvolvimento/executando_o_projeto/#crie-um-superusuario","title":"Crie um Superusu\u00e1rio","text":"<p>Voc\u00ea precisar\u00e1 de um usu\u00e1rio administrador para acessar a interface de administra\u00e7\u00e3o do Django. <pre><code>python manage.py createsuperuser\n</code></pre> Siga as instru\u00e7\u00f5es no terminal para definir o e-mail e a senha.</p>"},{"location":"desenvolvimento/executando_o_projeto/#compile-o-tailwind-css","title":"Compile o Tailwind CSS","text":"<p>Para que os estilos sejam aplicados corretamente, execute o comando de compila\u00e7\u00e3o do Tailwind CSS. <pre><code>npm run build\n</code></pre></p>"},{"location":"desenvolvimento/executando_o_projeto/#inicie-o-servidor-de-desenvolvimento","title":"Inicie o Servidor de Desenvolvimento","text":"<p>Agora, voc\u00ea pode iniciar o servidor do Django. <pre><code>python manage.py runserver\n</code></pre> A aplica\u00e7\u00e3o estar\u00e1 dispon\u00edvel em <code>http://127.0.0.1:8000/</code>.</p>"},{"location":"desenvolvimento/executando_o_projeto/#3-trabalhando-com-a-documentacao","title":"3. Trabalhando com a Documenta\u00e7\u00e3o","text":""},{"location":"desenvolvimento/executando_o_projeto/#visualizando-localmente","title":"Visualizando Localmente","text":"<p>Para visualizar esta documenta\u00e7\u00e3o em sua m\u00e1quina local, com recarregamento autom\u00e1tico ao salvar altera\u00e7\u00f5es: 1.  Certifique-se de que as depend\u00eancias em <code>requirements.txt</code> est\u00e3o instaladas (o que inclui <code>mkdocs</code> e <code>mkdocs-material</code>). 2.  Execute o comando:     <pre><code>mkdocs serve\n</code></pre> 3.  A documenta\u00e7\u00e3o estar\u00e1 dispon\u00edvel em <code>http://127.0.0.1:8001/</code>.</p>"},{"location":"desenvolvimento/executando_o_projeto/#publicando-no-github-pages","title":"Publicando no GitHub Pages","text":"<p>Para publicar a documenta\u00e7\u00e3o no GitHub Pages, use o seguinte comando: <pre><code>mkdocs gh-deploy\n</code></pre> Este comando ir\u00e1 construir o site est\u00e1tico e fazer o push para a branch <code>gh-pages</code> do seu reposit\u00f3rio, tornando-o dispon\u00edvel online.</p>"},{"location":"desenvolvimento/executando_o_projeto/#4-executando-em-producao-com-docker","title":"4. Executando em Produ\u00e7\u00e3o (com Docker)","text":"<p>O projeto inclui um <code>Dockerfile</code> e um <code>docker-compose.yml</code> para facilitar a execu\u00e7\u00e3o em um ambiente de produ\u00e7\u00e3o containerizado.</p> <ol> <li>Configure o <code>.env</code>: Certifique-se de que seu arquivo <code>.env</code> est\u00e1 preenchido com as configura\u00e7\u00f5es de produ\u00e7\u00e3o (banco de dados PostgreSQL, <code>DEBUG=False</code>, <code>ALLOWED_HOSTS</code>, etc.).</li> <li> <p>Construa e Inicie os Cont\u00eaineres:     <pre><code>docker-compose up --build -d\n</code></pre></p> <ul> <li><code>--build</code>: For\u00e7a a reconstru\u00e7\u00e3o das imagens.</li> <li><code>-d</code>: Executa os cont\u00eaineres em modo \"detached\" (em segundo plano).</li> </ul> </li> <li> <p>Execute as Migra\u00e7\u00f5es (no cont\u00eainer):     <pre><code>docker-compose exec web python manage.py migrate\n</code></pre></p> </li> </ol> <p>A aplica\u00e7\u00e3o estar\u00e1 dispon\u00edvel no endere\u00e7o e porta que voc\u00ea configurou em seu ambiente de produ\u00e7\u00e3o.</p>"},{"location":"desenvolvimento/versionamento/","title":"Versionamento e Fluxo de Trabalho Git","text":"<p>Para garantir a estabilidade, a rastreabilidade e a colabora\u00e7\u00e3o eficaz no desenvolvimento do SisCoE, adotamos um conjunto de padr\u00f5es para versionamento de software e para o fluxo de trabalho com o Git.</p>"},{"location":"desenvolvimento/versionamento/#versionamento-semantico-semver","title":"Versionamento Sem\u00e2ntico (SemVer)","text":"<p>O projeto utiliza o Versionamento Sem\u00e2ntico 2.0.0. Todas as releases devem seguir o formato <code>MAJOR.MINOR.PATCH</code>.</p> <ul> <li><code>MAJOR</code>: Incrementada para mudan\u00e7as incompat\u00edveis de API (que quebram a retrocompatibilidade).</li> <li><code>MINOR</code>: Incrementada para adicionar funcionalidades de maneira retrocompat\u00edvel.</li> <li><code>PATCH</code>: Incrementada para corre\u00e7\u00f5es de bugs retrocompat\u00edveis.</li> </ul> <p>Onde encontrar a vers\u00e3o?</p> <p>A vers\u00e3o oficial do projeto \u00e9 definida pelas tags do Git na branch <code>main</code>.</p>"},{"location":"desenvolvimento/versionamento/#fluxo-de-trabalho-git-git-flow","title":"Fluxo de Trabalho Git (Git Flow)","text":"<p>Utilizamos uma adapta\u00e7\u00e3o do Git Flow como nosso fluxo de trabalho de ramifica\u00e7\u00e3o (branching model). Este modelo isola o trabalho em andamento do c\u00f3digo de produ\u00e7\u00e3o.</p> <pre><code>graph LR\n    subgraph \"Produ\u00e7\u00e3o\"\n        A(main)\n    end\n    subgraph \"Desenvolvimento\"\n        B(develop)\n    end\n    subgraph \"Features &amp; Fixes\"\n        C(feature/nova-tela)\n        D(fix/bug-relatorio)\n    end\n    subgraph \"Releases\"\n        E(release/v1.2.0)\n    end\n    subgraph \"Hotfixes\"\n        F(hotfix/bug-critico)\n    end\n\n    B --&gt; C;\n    B --&gt; D;\n    C --&gt; B;\n    D --&gt; B;\n    B --&gt; E;\n    E --&gt; A;\n    E --&gt; B;\n    A --&gt; F;\n    F --&gt; A;\n    F --&gt; B;\n</code></pre>"},{"location":"desenvolvimento/versionamento/#branches-principais","title":"Branches Principais","text":"<ul> <li><code>main</code>: Reflete o c\u00f3digo em produ\u00e7\u00e3o. Todo commit na <code>main</code> \u00e9 uma nova release e deve ser tagueado. Apenas branches de <code>release</code> ou <code>hotfix</code> podem ser mescladas aqui.</li> <li><code>develop</code>: \u00c9 a branch de integra\u00e7\u00e3o para o desenvolvimento. Cont\u00e9m as funcionalidades mais recentes que ser\u00e3o inclu\u00eddas na pr\u00f3xima release.</li> </ul>"},{"location":"desenvolvimento/versionamento/#fluxo-de-desenvolvimento","title":"Fluxo de Desenvolvimento","text":"<ol> <li> <p>Crie uma Branch a partir de <code>develop</code>: Nunca trabalhe diretamente na <code>main</code> ou <code>develop</code>.</p> <pre><code># Para novas funcionalidades\ngit checkout develop\ngit pull\ngit checkout -b feature/nome-da-sua-feature\n\n# Para corre\u00e7\u00f5es de bugs n\u00e3o-urgentes\ngit checkout develop\ngit pull\ngit checkout -b fix/descricao-do-bug\n</code></pre> </li> <li> <p>Desenvolva e Fa\u00e7a Commits: Trabalhe na sua branch e fa\u00e7a commits pequenos e coesos usando o padr\u00e3o de Commits Convencionais (veja abaixo).</p> </li> <li> <p>Abra um Pull Request (PR): Ao concluir, envie sua branch para o reposit\u00f3rio remoto e abra um Pull Request (PR) com a branch <code>develop</code> como destino.</p> </li> <li> <p>Revis\u00e3o e Merge: Ap\u00f3s a aprova\u00e7\u00e3o da revis\u00e3o de c\u00f3digo, seu PR ser\u00e1 mesclado na <code>develop</code>.</p> </li> </ol> <p>Mantenha-se Atualizado</p> <p>Mantenha sua branch sempre atualizada com a <code>develop</code> para evitar conflitos. Use <code>git pull origin develop</code> regularmente.</p>"},{"location":"desenvolvimento/versionamento/#padrao-de-commits-conventional-commits","title":"Padr\u00e3o de Commits (Conventional Commits)","text":"<p>Para manter um hist\u00f3rico de commits limpo e leg\u00edvel, seguimos a especifica\u00e7\u00e3o Conventional Commits.</p> <p>A estrutura \u00e9: <code>&lt;tipo&gt;[escopo opcional]: &lt;descri\u00e7\u00e3o&gt;</code>.</p>"},{"location":"desenvolvimento/versionamento/#tipos-de-commit-mais-comuns","title":"Tipos de Commit Mais Comuns:","text":"<ul> <li><code>feat</code>: Uma nova funcionalidade.</li> <li><code>fix</code>: Uma corre\u00e7\u00e3o de bug.</li> <li><code>docs</code>: Mudan\u00e7as apenas na documenta\u00e7\u00e3o.</li> <li><code>style</code>: Mudan\u00e7as que n\u00e3o afetam o significado do c\u00f3digo (formata\u00e7\u00e3o, etc).</li> <li><code>refactor</code>: Uma altera\u00e7\u00e3o de c\u00f3digo que n\u00e3o corrige um bug nem adiciona uma funcionalidade.</li> <li><code>test</code>: Adicionando ou corrigindo testes.</li> <li><code>chore</code>: Mudan\u00e7as no processo de build ou em ferramentas auxiliares.</li> </ul> <p>Exemplos de Mensagens de Commit</p> <ul> <li><code>feat(accounts): adicionar login social com Google</code></li> <li><code>fix(efetivo): corrigir c\u00e1lculo de idade do servidor</code></li> <li><code>docs(arquitetura): adicionar diagrama de fluxo de requisi\u00e7\u00e3o</code></li> </ul>"}]}